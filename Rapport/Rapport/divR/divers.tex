\chapter{Prise en main du logiciel R}
\textbf{Auteur : } \underline{\href{http://www.math.unicaen.fr/~chesneau/}{Christophe Chesneau}}\newline
\\
\section{Présentation}
Pourquoi s'intéresser au logiciel \textbf{R} ?
Parce que :
\begin{itemize}
  \item Il permet de faire des analyses statistiques avancées.
  \item Il permet de faire de beaux graphiques\footnote{
  Dans ce cas précis, il s'agit de la \textit{Barnsley fern}\newline
  \\
  The Barnsley Fern is a fractal named after the British mathematician Michael Barnsley who first described it in his book Fractals Everywhere. He made it to resemble the Black Spleenwort, Asplenium adiantum-nigrum.\newline
  Barnsley's fern uses four affine transformations. The formula for one transformation is the following :
  $$f(x,y) = \begin{bmatrix} 
a & b \\
c & d 
\end{bmatrix}\begin{bmatrix} 
x \\
y
\end{bmatrix} + 
\begin{bmatrix} 
e \\
f 
\end{bmatrix}$$
\textcolor{white}{.}\newline
Barnsley shows the IFS code for his Black Spleenwort fern fractal as a matrix of values shown in a table. In the table, the columns $a$ through $f$ are the coefficients of the equation, and $p$ represents the probability factor.\newline
\textcolor{white}{.}\newline
\begin{center}
\begin{tabular}{|c|c|c|c|c|c|c|c|l|}
\hline
\textbf{w} & \textbf{a} & \textbf{b} & \textbf{c} & \textbf{d} & \textbf{e} & \textbf{f} & \textbf{p} & \multicolumn{1}{c|}{\textbf{Portion generated}} \\ \hline
$f_{1}$    & 0          & 0          & 0          & 0.16       & 0          & 0          & 0.01       & Stem (Tige)                                     \\ \hline
$f_{2}$    & 0.85       & 0.04       & -0.04      & 0.85       & 0          & 1.60       & 0.85       & Successively smaller leaflets                   \\ \hline
$f_{3}$    & 0.20       & -0.26      & 0.23       & 0.22       & 0          & 1.6        & 0.07       & Largest left-hand leaflet                       \\ \hline
$f_{4}$    & -0.15      & 0.28       & 0.26       & 0.24       & 0          & 0.44       & 0.07       & Largest right-hand leaflet                      \\ \hline
\end{tabular}
\end{center}
\textcolor{white}{.}\newline
\newline
These correspond to the following transformations:
$$f_1(x,y) = \begin{bmatrix} 
0.00 & 0.00 \\
0.00 & 0.16 
\end{bmatrix}\begin{bmatrix} 
x \\
y
\end{bmatrix}$$
$$f_2(x,y) = \begin{bmatrix} 
0.85 & 0.04 \\
-0.04 & 0.85 
\end{bmatrix}\begin{bmatrix} 
x \\
y
\end{bmatrix} + 
\begin{bmatrix} 
0.00 \\
1.60 
\end{bmatrix}$$
$$f_3(x,y) = \begin{bmatrix} 
0.20 & -0.26 \\
0.23 & 0.22 
\end{bmatrix}\begin{bmatrix} 
x \\
y
\end{bmatrix} + 
\begin{bmatrix} 
0.00 \\
1.60 
\end{bmatrix}$$
$$f_4(x,y) = \begin{bmatrix} 
-0.15 & 0.28 \\
0.26 & 0.24 
\end{bmatrix}\begin{bmatrix} 
x \\
y
\end{bmatrix} + 
\begin{bmatrix} 
0.00 \\
0.44 
\end{bmatrix}$$

  \textbf{Computer generation} : \newline
  
Though Barnsley's fern could in theory be plotted by hand with a pen and graph paper, the number of iterations necessary runs into the tens of thousands, which makes use of a computer practically mandatory. Many different computer models of Barnsley's fern are popular with contemporary mathematicians. As long as the math is programmed correctly using Barnsley's matrix of constants, the same fern shape will be produced.

The first point drawn is at the origin ($x_{0} = 0, y_{0} = 0$) and then the new points are iteratively computed by randomly applying one of the following four coordinate transformations:
$$f_{1}\textrm{ : }  x_{n+1} = 0 \textrm{ ; }  y_{n+1} = 0.16\cdot y_{n}$$
This coordinate transformation is chosen 1\% of the time and just maps any point to a point in the first line segment at the base of the stem. This part of the figure is the first to be completed in during the course of iterations.\newline
$$f_{2}\textrm{ : }  x_{n+1} = 0.85\cdot x_{n} + 0.04\cdot y_{n} \textrm{ ; }  y_{n+1} = -0.04\cdot x_{n} + 0.85\cdot y_{n} + 1.6$$
This coordinate transformation is chosen 85\% of the time and maps any point inside the leaflet represented by the red triangle to a point inside the opposite, smaller leaflet represented by the blue triangle in the figure.\newline
$$f_{3}\textrm{ : }  x_{n+1} = 0.2\cdot x_{n} - 0.26\cdot y_{n} \textrm{ ; }  y_{n+1} = 0.23\cdot y_{n} + 0.22\cdot y_{n} + 1.6$$
This coordinate transformation is chosen 7\% of the time and maps any point inside the leaflet (or pinna) represented by the blue triangle to a point inside the alternating corresponding triangle across the stem (it flips it).\newline
$$f_{4}\textrm{ : }  x_{n+1} = -0.15\cdot x_{n} + 0.28\cdot y_{n} \textrm{ ; }  y_{n+1} = 0.26\cdot y_{n} + 0.24\cdot y_{n} + 0.44$$ This coordinate transformation is chosen 7\% of the time and maps any point inside the leaflet (or pinna) represented by the blue triangle to a point inside the alternating corresponding triangle across the stem (without flipping it).}

\begin{figure}[H]\begin{center}\includegraphics[scale=0.6]{ilu/frac.png}\end{center}\end{figure}

  \item Il commence à être un logiciel de référence dans le monde du travail.
  \item Il est simple d'utilisation.
  \item Il est gratuit.
\end{itemize}
L'objectif de ce document est de présenter les objets élémentaires du logiciel R (scalaires, vecteurs, matrices, listes \dots) et quelques opérations associées. Le format \textit{exemple - explication} est adopté.\newline
Pour tout commentaire, merci de me contacter :
\begin{center}
\href{christophe.chesneau@gmail.com}{christophe.chesneau@gmail.com}
\end{center}
Bonne lecture !\newline
\\

\begin{lstlisting}[language=html]
## Barnsley's fern
library(grid)
A=vector("list",4)
A[[1]]=matrix(c(0,0,0,0.16),nrow=2)
A[[2]]=matrix(c(0.85,-0.04,0.04,0.85),nrow=2)
A[[3]]=matrix(c(0.2,0.23,-0.26,0.22),nrow=2)
A[[4]]=matrix(c(-0.15,0.26,0.28,0.24),nrow=2)
b=vector("list",4)
b[[1]]=matrix(c(0,0))
b[[2]]=matrix(c(0,1.6))
b[[3]]=matrix(c(0,1.6))
b[[4]]=matrix(c(0,0.44))
n <- 50000
x <- numeric(n)
y <- numeric(n)
x[1] <- y[1] <- 0
for (i in 1:(n-1)) {
  trans <- sample(1:4, prob=c(.01, .85, .07, .07), size=1)
  xy <- A[[trans]]\% * \%c(x[i],y[i]) + b[[trans]]
  x[i+1] <- xy[1]
  y[i+1] <- xy[2]
}
plot(y,x,col="dark green",cex=0.1)
\end{lstlisting}
\section{Fenêtre "R Console"}
Installer la dernière version du logiciel \textbf{R} en fonction de votre système d'exploitation (Windows, Linux, Mac\dots ) : \underline{\href{https://cran.r-project.org/}{CRAN}}\newline
La version utilisée dans ce document est installée sous Windows. Ensuite, double-cliquer sur le logo \textbf{R}. Une fenêtre \textit{"R Console"} s'ouvre alors :
\begin{figure}[H]\begin{center}\includegraphics[scale=0.7]{ilu/consolR.png}\end{center}\end{figure}
On écrit les commandes désirées après le \textcolor{red}{>}, lesquelles s'affiche en rouge, on les exécute en appuyant sur la touche \underline{Entrée} . Les sorties s'affichent en bleu.\newline
Pour fermer sèchement la fenêtre \textit{R Console}, écrire : \textit{q("no")} (puis appuyer sur \underline{Entrée} ).
\section{Opérations de base (\%traîner)}
On peut utiliser R pour faire des opérations algébriques élémentaires, comme on le fait avec la calculette. Recopier pas à pas les commandes R (\textcolor{red}{en rouge}) présentées dans la fenêtre \textit{"R Console"} ci-dessous (si le symbole \textcolor{red}{+} apparaît après une éxécution prématurée, appuyer sur la touche \textit{Échap}).
\begin{lstlisting}[language=html]
> 3+2
[1] 5
> 3-2
[1] 1
> 3*2
[1] 6
> 3/2
[1] 1.5
> 3^2
[1] 9
> 3+2;3-2;3*2;3^2
[1] 5
[1] 1
[1] 6
[1] 9
> 3+1+1
[1] 5
> 3+1-1
[1] 3
> 3-1-1
[1] 1
> 3*1+1
[1] 4
> 3*(1+1)
[1] 6
> 3/1+1
[1] 4
> 3/(1+1)
[1] 1.5
> 3^1+1
[1] 4
> 3^(1+1)
[1] 9
> (1+2)^(1+1)
[1] 9
> pi
[1] 3.141593
> pi^2
[1] 9.869604
> pi/3.141593
[1] 0.9999999
> 1+2+3+4+5+6+7+8+9+10
[1] 55
> 10*11/2 # Commentaire : C'est le dernier
[1] 55
\end{lstlisting}
On peut travailler directement avec des variables (scalaires) que l'on met en mémoire dès le début.\newline
Recopier pas à pas les commandes R présentées dans la fenêtre \textit{R Console} ci-dessous.
\begin{lstlisting}[language=html]
> x = 2
> a = 2
> b = 3
> c = 4
> x + c
[1] 6
> b*x + c
[1] 10
> a*x^2 + b*x + c
[1] 18
> b/(x+c)^a
[1] 0.08333333
> x^(a+b+c)
[1] 512
> rm(x,a,b,c) # on retire définitivement les variables x,a,b et c de la mémoire, "rm" signifie "remove"
> a
Erreur : objet 'a' introuvable
> a+b
Erreur : objet 'a' introuvable
\end{lstlisting}
Pour compléter cette première approche, précisons que :
\begin{itemize}
  \item tout ce qui n'est pas un objet de R doit être mis entre guillemets
  \item on peut faire des tests logiques.
\end{itemize}
Recopier pas à pas les commandes R présentées dans la fenêtre \textit{R Console} ci-dessous.
\begin{lstlisting}[language=html]
> Bonjour # Ce n'est pas un objet R
Erreur : objet 'Bonjour' introuvable
> "Bonjour" # Cela est considéré par R car signalé en tant qu'objet extérieurà R
[1] "Bonjour"
> TRUE # Vrai ; C'est un objet R
[1] TRUE
> FALSE # Faux ; C'est un objet R
[1] FALSE
> T # Abréviation de TRUE; C'est un objet R
[1] TRUE
> F # Abréviation de FALSE; C'est un objet R
[1] FALSE
> NA # Abréviation comprise de Non Available ; C'est un objet R
[1] NA
> 3>2 # Est ce que 3 > 2 ?
[1] TRUE
> 3<2 # Est ce que 3 < 2 ?
[1] FALSE
> 3==2 # Est ce que 3 = 2 ?
[1] FALSE
> 2==2 # Est ce que 2 = 2 ?
[1] TRUE
\end{lstlisting}
\section{Création de vecteurs}
\subsection*{R : un langage vectoriel}
Un vecteur dans R est un objet fourre tout ; c'est une collection de données et non un vecteur au sens mathématique du terme. Le langage R est centré autour du fait qu'un vecteur est un ensemble ordonné de mesures plutôt qu'une position géométrique ou un état physique. Mêmes si R est en mesure de faire des opérations vectorielles mathématiques classiques, celles-ci sont secondaires dans la conception de la langue. À partir de tels objets, d'autres objets plus sophistiqués sont construits (matrice, liste, data
frame \newline). Il est donc crucial de bien maitriser cette notion de \textit{R vecteur} pour bien commencer.\newline
\\
\textcolor{red}{Dorénavant, il est conseillé de recopier une à une, et dans l'ordre, les commandes R à venir dans la fenêtre \textit{R Console}. La plupart des objets définis seront utilisés pour en définir d'autres.}
\subsection*{Création de vecteurs numériques}
On considère les commandes :
\begin{lstlisting}[language=html]
> vec1 = c(2.8, 2.4, 2.1, 3.6, 2.8)
> vec1
[1] 2.8 2.4 2.1 3.6 2.8
\end{lstlisting}
On a ainsi créé le vecteur ligne vec1 en concaténant les éléments : 2.8, 2.4, 2.1, 3.6 et 2.8.\newline
Le $\lbrack 1 \rbrack$ signifie que vec1 est défini sur la $1^{\textrm{ère}}$ ligne.
\subsection*{Création de vecteurs chaînes de caractères}
On fait :
\begin{lstlisting}[language=html]
> vec2 = c("rouge", "vert", "vert", "vert", "jaune")
> vec2
[1] "rouge" "vert"  "vert"  "vert"  "jaune"
\end{lstlisting}
\subsection*{Création de vecteurs logiques}
On considère les commandes :
\begin{lstlisting}[language=html]
> vec3 = c(TRUE, TRUE, FALSE, FALSE, FALSE)
> vec3
[1]  TRUE  TRUE FALSE FALSE FALSE
\end{lstlisting}



\subsection*{Création par répétition}
On fait :
\begin{lstlisting}[language=html]
> rep(4, 3)
[1] 4 4 4
\end{lstlisting}
Ainsi, on a répété le chiffre 4 trois fois.\newline
On considère les commandes :
\begin{lstlisting}[language=html]
> vec4 = rep(vec1, 2)
> vec4
 [1] 2.8 2.4 2.1 3.6 2.8 2.8 2.4 2.1 3.6 2.8
\end{lstlisting}
On a alors créé un vecteur vec4 en concaténant le vecteur vec1 avec lui-même.\newline
On fait :
\begin{lstlisting}[language=html]
> vec5 = rep(vec1, c(2, 1, 3, 3, 2))
> vec5
 [1] 2.8 2.8 2.4 2.1 2.1 2.1 3.6 3.6 3.6 2.8 2.8
\end{lstlisting}
On a ainsi créé un vecteur vec5 en répétant certains éléments de vec1. Ainsi, le $i^{\textrm{ème}}$ élément de vec1 est répété autant de fois que l'indique le $i^{\textrm{ème}}$ élément du second vecteur.
\subsection*{Création par construction de suites}
On considère les commandes :
\begin{lstlisting}[language=html]
> vec6 = 1:10
> vec6
 [1]  1  2  3  4  5  6  7  8  9 10
\end{lstlisting}
Ainsi, on a créé un vecteur dont les éléments sont les 10 premiers entiers positifs.\newline
On fait :
\begin{lstlisting}[language=html]
> vec7 = seq(from = 3, to = 5, by = 0.2)
> vec7
 [1] 3.0 3.2 3.4 3.6 3.8 4.0 4.2 4.4 4.6 4.8 5.0
\end{lstlisting}
On a alors créé un vecteur vect7 dont les éléments sont les valeurs $3 + 0.2\times i$ pour tous les entiers $i$ tels que $3 + 0.2 \times i \leq 5$ : \textit{3.0 3.2 3.4, 3.6, 3.8, 4.0, 4.2, 4.4, 4.6, 4.8 et 5.0}.\newline
\\
On aurait aussi pu construire vec7 en faisant :
\begin{lstlisting}[language=html]
> vec7 = seq(from = 3, length = 11, by = 0.2)
> vec7
 [1] 3.0 3.2 3.4 3.6 3.8 4.0 4.2 4.4 4.6 4.8 5.0
\end{lstlisting}
\subsection*{Création élément par élément}
On considère les commandes :
\begin{lstlisting}[language=html]
> vec8 = numeric()
> vec8[1] = 41.8
> vec8[2] = -0.3
> vec8[3] = 92
> vec8
[1] 41.8 -0.3 92.0
\end{lstlisting}
Ainsi, on a créé un vecteur vec8 en introduisant les 3 éléments : 41.8, -0.3 et 92.\newline
On peut faire la même chose avec un vecteur de chaînes de caractères :
\begin{lstlisting}[language=html]
> vec9 = character()
> vec9
character(0)
\end{lstlisting}
On peut faire de même avec un vecteur logique :
\begin{lstlisting}[language=html]
> vec10 = logical()
> vec10
logical(0)
\end{lstlisting}
\begin{lstlisting}[language=html]
> vecA = integer()
> vecA
integer(0)
\end{lstlisting}

Ou encore d'autres types d'objets\footnote{
  \textbf{typeof(x)} determines the (R internal) type or storage mode of any object.\newline
  A character string. The possible values are listed in the structure TypeTable in ?src/main/util.c'. Current values are the vector types "logical", "integer", "double", "complex", "character", "raw" and "list", "NULL", "closure" (function), "special" and "builtin" (basic functions and operators), "environment", "S4" (some S4 objects) and others that are unlikely to be seen at user level ("symbol", "pairlist", "promise", "language", "char", "...", "any", "expression", "externalptr", "bytecode" and "weakref").

}
\section{Création de matrices}
\subsection*{Méthode générique}
On considère les commandes :
\begin{lstlisting}[language=html]
> vec4
 [1] 2.8 2.4 2.1 3.6 2.8 2.8 2.4 2.1 3.6 2.8
> mat1 = matrix(vec4, ncol = 5)
> mat1
     [,1] [,2] [,3] [,4] [,5]
[1,]  2.8  2.1  2.8  2.4  3.6
[2,]  2.4  3.6  2.8  2.1  2.8
\end{lstlisting}

On a ainsi transformé le vecteur ligne vec4 en une matrice à 5 colonnes (et, par conséquent, 2 lignes). Par défaut, les éléments de vec4 sont rentrés par colonnes.\newline
Si on veut rentrer les éléments de vec4 par lignes, on fait :
\begin{lstlisting}[language=html]
> mat2 = matrix(vec4, ncol = 5, byrow = T)
> mat2
     [,1] [,2] [,3] [,4] [,5]
[1,]  2.8  2.4  2.1  3.6  2.8
[2,]  2.8  2.4  2.1  3.6  2.8
\end{lstlisting}

\subsection*{Autre méthode}
On considère les commandes :
\begin{lstlisting}[language=html]
> vec1
[1] 2.8 2.4 2.1 3.6 2.8
> mat3 = cbind(vec1, 3:7)
> mat3
     vec1  
[1,]  2.8 3
[2,]  2.4 4
[3,]  2.1 5
[4,]  3.6 6
[5,]  2.8 7
> dim(mat3)
[1] 5 2
\end{lstlisting}
Ainsi, la commande \textit{cbind} concatène des colonnes de vecteurs de \textbf{même longueur}. On peut faire de même en concaténant des lignes avec la commande rbind.\newline
\begin{lstlisting}[language=html]
> mat3 = rbind(vec1, 3:7)
> mat3
     [,1] [,2] [,3] [,4] [,5]
vec1  2.8  2.4  2.1  3.6  2.8
      3.0  4.0  5.0  6.0  7.0
\end{lstlisting}
On fait :
\begin{lstlisting}[language=html]
> mat4 = diag(c(2, 1, 5))
> mat4
     [,1] [,2] [,3]
[1,]    2    0    0
[2,]    0    1    0
[3,]    0    0    5
\end{lstlisting}
On a alors créé une matrice diagonale mat4 d'éléments diagonaux : 2, 1 et 5.

\subsection*{Extraire une colonne ou une ligne}
On considère les commandes :
\begin{lstlisting}[language=html]
> mat1
     [,1] [,2] [,3] [,4] [,5]
[1,]  2.8  2.1  2.8  2.4  3.6
[2,]  2.4  3.6  2.8  2.1  2.8
> mat1[,3]
[1] 2.8 2.8
\end{lstlisting}
On obtient alors un vecteur ligne dont les éléments sont ceux de la $3^{\textrm{ème}}$ colonne de mat1.
On fait :
\begin{lstlisting}[language=html]
> mat1
     [,1] [,2] [,3] [,4] [,5]
[1,]  2.8  2.1  2.8  2.4  3.6
[2,]  2.4  3.6  2.8  2.1  2.8
> mat1[2, ]
[1] 2.4 3.6 2.8 2.1 2.8
\end{lstlisting}
Ainsi, on obtient un vecteur ligne dont les éléments sont ceux de la $2^{\textrm{ème}}$ ligne de mat1.

\subsection*{Extraire une sous-matrice}

On considère les commandes :
\begin{lstlisting}[language=html]
> mat1
     [,1] [,2] [,3] [,4] [,5]
[1,]  2.8  2.1  2.8  2.4  3.6
[2,]  2.4  3.6  2.8  2.1  2.8
> mat1[, c(2, 4, 5)]
     [,1] [,2] [,3]
[1,]  2.1  2.4  3.6
[2,]  3.6  2.1  2.8
\end{lstlisting}
On obtient ainsi une matrice construite avec les $2^{\textrm{ème}}$, $4^{\textrm{ème}}$ et $5^{\textrm{ème}}$ colonnes de mat1.\newline
On aurait aussi pu construire cette matrice en faisant :
\begin{lstlisting}[language=html]
> mat1
     [,1] [,2] [,3] [,4] [,5]
[1,]  2.8  2.1  2.8  2.4  3.6
[2,]  2.4  3.6  2.8  2.1  2.8
> mat1[, c(2, 4, 5)]
     [,1] [,2] [,3]
[1,]  2.1  2.4  3.6
[2,]  3.6  2.1  2.8
> mat1[, c(FALSE, TRUE, FALSE, TRUE, TRUE)]
     [,1] [,2] [,3]
[1,]  2.1  2.4  3.6
[2,]  3.6  2.1  2.8
\end{lstlisting}
On considère les commandes :
\begin{lstlisting}[language=html]
> ## mat3 = cbind(vec1, 3:7)
> mat3
     vec1  
[1,]  2.8 3
[2,]  2.4 4
[3,]  2.1 5
[4,]  3.6 6
[5,]  2.8 7
> mat3[c(1, 4), ]
     vec1  
[1,]  2.8 3
[2,]  3.6 6
\end{lstlisting}
Ainsi, cette matrice est construite avec les $1^{\textrm{ère}}$ et $4^{\textrm{ème}}$ lignes de mat3.

\subsection*{Calculer les dimensions d'une matrice}
On considère les commandes :
\begin{lstlisting}[language=html]
> mat1
     [,1] [,2] [,3] [,4] [,5]
[1,]  2.8  2.1  2.8  2.4  3.6
[2,]  2.4  3.6  2.8  2.1  2.8
> dim(mat1)
[1] 2 5
\end{lstlisting}
Ainsi, sans surprise, la matrice mat1 a $2$ lignes et $5$ colonnes.
\section{Création de listes}

\subsection*{Méthode directe}
On considère les commandes :
\begin{lstlisting}[language=html]
> vec1
[1] 2.8 2.4 2.1 3.6 2.8
> mat1
     [,1] [,2] [,3] [,4] [,5]
[1,]  2.8  2.1  2.8  2.4  3.6
[2,]  2.4  3.6  2.8  2.1  2.8
> list1 = list(vec1, c("rouge", "bleu"), mat1)
> list1
[[1]]
[1] 2.8 2.4 2.1 3.6 2.8

[[2]]
[1] "rouge" "bleu" 

[[3]]
     [,1] [,2] [,3] [,4] [,5]
[1,]  2.8  2.1  2.8  2.4  3.6
[2,]  2.4  3.6  2.8  2.1  2.8
\end{lstlisting}
Ainsi, la liste list1 est composée de plusieurs objets : le vecteur numérique vec1, le vecteur chaînes de caractères c("rouge", "bleu") et la matrice mat1.

\subsection*{Création élément par élément}
On considère les commandes :
\begin{lstlisting}[language=html]
> vec1
[1] 2.8 2.4 2.1 3.6 2.8
> mat2
     [,1] [,2] [,3] [,4] [,5]
[1,]  2.8  2.4  2.1  3.6  2.8
[2,]  2.8  2.4  2.1  3.6  2.8
> list2 = list()
> list2[[1]] = vec1
> list2[[2]] = c("rouge", "bleu", "vert")
> list2[[3]] = mat2
> list2
[[1]]
[1] 2.8 2.4 2.1 3.6 2.8

[[2]]
[1] "rouge" "bleu"  "vert" 

[[3]]
     [,1] [,2] [,3] [,4] [,5]
[1,]  2.8  2.4  2.1  3.6  2.8
[2,]  2.8  2.4  2.1  3.6  2.8
\end{lstlisting}
\section{Opérations sur les vecteurs}
\subsection*{Opérations élémentaires}
\subsubsection*{Copier}
On considère les commandes :
\begin{lstlisting}[language=html]
> vec1
[1] 2.8 2.4 2.1 3.6 2.8
> vec11 = vec1
> vec11
[1] 2.8 2.4 2.1 3.6 2.8
> vec13 = vec12 = vec11
> vec12;vec13
[1] 2.8 2.4 2.1 3.6 2.8
[1] 2.8 2.4 2.1 3.6 2.8
\end{lstlisting}
On a ainsi copié vec1 dans les vecteurs vec11, vec12 et vec13.

\subsubsection*{Concaténer.}
On fait :
\begin{lstlisting}[language=html]
> vec1
[1] 2.8 2.4 2.1 3.6 2.8
> c(vec1, c(3.9, 2.7))
[1] 2.8 2.4 2.1 3.6 2.8 3.9 2.7
\end{lstlisting}
On a donc rajouté les éléments : 3.9 et 2.7, à la fin de vec1.\newline
\\
On considère les commandes :
\begin{lstlisting}[language=html]
> vec2
[1] "rouge" "vert"  "vert"  "vert"  "jaune"
> c("blanc", vec2)
[1] "blanc" "rouge" "vert"  "vert"  "vert" 
[6] "jaune"
\end{lstlisting}
Ainsi, on a rajouté l'élément "blanc" au début de vect2.

\subsubsection*{Extraire.}
On considère les commandes :
\begin{lstlisting}[language=html]
> length(vec1)
[1] 5
> vec1
[1] 2.8 2.4 2.1 3.6 2.8
> vec1[2]
[1] 2.4
\end{lstlisting}
On a alors extrait le $2^{\textrm{ème}}$ élément de vec1.\newline
\\
On fait :
\begin{lstlisting}[language=html]
> vec1[c(2, 4)]
[1] 2.4 3.6
\end{lstlisting}
On a ainsi extrait les $2^{\textrm{ème}}$ et $4^{\textrm{ème}}$ éléments de vec1.\newline
\\
On considère les commandes :
\begin{lstlisting}[language=html]
> vec1[2:4]
[1] 2.4 2.1 3.6
\end{lstlisting}
On a alors extrait les $2^{\textrm{ème}}$, $3^{\textrm{ème}}$ et $4^{\textrm{ème}}$ éléments de vec1.\newline
\\
On considère les commandes :
\begin{lstlisting}[language=html]
> vec1
[1] 2.8 2.4 2.1 3.6 2.8
> vec3
[1]  TRUE  TRUE FALSE FALSE FALSE
> vec1[vec3]
[1] 2.8 2.4
\end{lstlisting}
On a ainsi extrait le $1^{\textrm{er}}$ et $2^{\textrm{ème}}$ éléments de vec1 dont les indices correspondent aux éléments T de vec3.

\subsubsection*{Raccourcir.}
On fait :
\begin{lstlisting}[language=html]
> vec11
[1] 2.8 2.4 2.1 3.6 2.8
> vec11[-2]
[1] 2.8 2.1 3.6 2.8
\end{lstlisting}
On obtient ainsi le vecteur vec1 privé de son $2^{\textrm{ème}}$ élément.\newline
\\
On considère les commandes :
\begin{lstlisting}[language=html]
> vec12
[1] 2.8 2.4 2.1 3.6 2.8
> vec12[-c(2, 4)]
[1] 2.8 2.1 2.8
\end{lstlisting}
Ainsi, on a vect13 privé de ses $2^{\textrm{ème}}$, $3^{\textrm{ème}}$ et $4^{\textrm{ème}}$ éléments.


\subsubsection*{Remplacer.}
On fait :
\begin{lstlisting}[language=html]
> vec5
 [1] 2.8 2.8 2.4 2.1 2.1 2.1 3.6 3.6 3.6 2.8 2.8
> vec5[3:5] = c(1034, 238, -99)
> vec5
 [1]    2.8    2.8 1034.0  238.0  -99.0    2.1
 [7]    3.6    3.6    3.6    2.8    2.8
\end{lstlisting}
Ainsi, on a remplacé les $3^{\textrm{ème}}$, $4^{\textrm{ème}}$ et $5^{\textrm{ème}}$ éléments de vec5 par les éléments : 1034, 238 et -99.

\subsubsection*{Attribuer des labels.}
On considère les commandes :
\begin{lstlisting}[language=html]
> vec1
[1] 2.8 2.4 2.1 3.6 2.8
> names(vec1) = c("julie", "paul", "solveigh", "valentin", "elsa")
> vec1
   julie     paul solveigh valentin     elsa 
     2.8      2.4      2.1      3.6      2.8 
\end{lstlisting}
On peut alors extraire le $2^{\textrm{ème}}$ élément de vec1 en faisant :
\begin{lstlisting}[language=html]
> vec1
   julie     paul solveigh valentin     elsa 
     2.8      2.4      2.1      3.6      2.8 
> vec1["paul"]
paul 
 2.4 
\end{lstlisting}
On peut enlever les labels attribués en faisant :
\begin{lstlisting}[language=html]
> vec1
   julie     paul solveigh valentin     elsa 
     2.8      2.4      2.1      3.6      2.8 
> names(vec1) = c()
> vec1
[1] 2.8 2.4 2.1 3.6 2.8
\end{lstlisting}

\subsubsection*{Connaître la nature.}
On considère les commandes :
\begin{lstlisting}[language=html]
> vec5
 [1]    2.8    2.8 1034.0  238.0  -99.0    2.1
 [7]    3.6    3.6    3.6    2.8    2.8
> mode(vec5)
[1] "numeric"
\end{lstlisting}
Une autre solution est :
\begin{lstlisting}[language=html]
> is.numeric(vec5)
[1] TRUE
\end{lstlisting}
Idem pour les autres types d'objets\footnote{"logical", "integer", "double", "complex", "character", "raw" and "list", "NULL", "closure" (function), "special" and "builtin" (basic functions and operators), "environment", "S4" (some S4 objects) and others that are unlikely to be seen at user level ("symbol", "pairlist", "promise", "language", "char", "...", "any", "expression", "externalptr", "bytecode" and "weakref").}



\subsubsection*{Changer la nature.}
On considère les commandes :
\begin{lstlisting}[language=html]
> vec4
 [1] 2.8 2.4 2.1 3.6 2.8 2.8 2.4 2.1 3.6 2.8
> as.character(vec4)
 [1] "2.8" "2.4" "2.1" "3.6" "2.8" "2.8" "2.4"
 [8] "2.1" "3.6" "2.8"
\end{lstlisting}
On a alors changé un vecteur numérique en vecteur de chaînes de caractères.
\subsection*{Opérations arithmétiques sur des vecteurs numériques}

\subsubsection*{Opérations élémentaires.}
On considère les commandes :
\begin{lstlisting}[language=html]
> vec1
[1] 2.8 2.4 2.1 3.6 2.8
> vec1 + 4
[1] 6.8 6.4 6.1 7.6 6.8
\end{lstlisting}
On obtient ainsi un vecteur dont le $i^{\textrm{ème}}$ éléments est la valeur du $i^{\textrm{ème}}$ élément de vec1 plus 4.
On fait :
\begin{lstlisting}[language=html]
> vec1
[1] 2.8 2.4 2.1 3.6 2.8
> 3 * vec1
[1]  8.4  7.2  6.3 10.8  8.4
> 3 * vec1 + 1:5
[1]  9.4  9.2  9.3 14.8 13.4
\end{lstlisting}
On considère les commandes :
\begin{lstlisting}[language=html]
> vec1
[1] 2.8 2.4 2.1 3.6 2.8
> 2 * vec1
[1] 5.6 4.8 4.2 7.2 5.6
> 2 * vec1 - c(1, 2)
[1] 4.6 2.8 3.2 5.2 4.6
\end{lstlisting}
Ainsi, quand deux vecteurs n'ont pas la même longueur, le plus court est répliqué jusqu'à ce qu'il
ait atteint la longueur du plus grand.

\subsubsection*{Réarrangement des éléments}
On considère les commandes :
\begin{lstlisting}[language=html]
> vec1
[1] 2.8 2.4 2.1 3.6 2.8
> rev(vec1)
[1] 2.8 3.6 2.1 2.4 2.8
\end{lstlisting}
On obtient ainsi un vecteur dont l'ordre des éléments de vec1 est renversé.\newline
\\
On fait :
\begin{lstlisting}[language=html]
> vec1
[1] 2.8 2.4 2.1 3.6 2.8
> sort(vec1)
[1] 2.1 2.4 2.8 2.8 3.6
> sort(vec1, decreasing = TRUE)
[1] 3.6 2.8 2.8 2.4 2.1
\end{lstlisting}
Ainsi, on a trié les valeurs des éléments de vec1 par ordre croissant (et par l'ordre décroissant).\newline
\\
On considère les commandes :
\begin{lstlisting}[language=html]
> vec1
[1] 2.8 2.4 2.1 3.6 2.8
> order(vec1)
[1] 3 2 1 5 4
\end{lstlisting}
On donne alors les indices des éléments de vec1 par ordre de valeurs croissant. Complément sur order\footnote{
  \textit{order(..., na.last = TRUE, decreasing = FALSE, method = c("shell", "radix"))}
  \begin{itemize}
    \item ... : a sequence of numeric, complex, character or logical vectors, all of the same length, or a classed R object.
    \item x :an atomic vector.
    \item partial : vector of indices for partial sorting. (Non-NULL values are not implemented.)
    \item decreasing  : logical. Should the sort order be increasing or decreasing? For the "radix" method, this can be a vector of length equal to the number of arguments in .... For the other methods, it must be length one.
    \item na.last : for controlling the treatment of NAs. If TRUE, missing values in the data are put last; if FALSE, they are put first; if NA, they are removed (see ?Note'.)
    \item method : the method to be used: partial matches are allowed. The default is "shell" except for some special cases: see ?Details'. For details of methods "shell", "quick", and "radix", see the help for sort.
  \end{itemize}
  
}.

\subsubsection*{Application d'une fonction : vecteur longueur k $\longrightarrow $ vecteur longueur k}
Pour les fonctions : \textit{abs, log, log10, sqrt, exp, sin, cos, tan, acos, atan, asin, cosh, sinh, tanh, gamma, lgamma et round (et bien d'autres)}, l'application à un vecteur donne un vecteur de même longueur, dont la valeur du $i^{\textrm{ème}}$ élément est le résultat de la fonction pour la valeur du $i^{\textrm{ème}}$ élément du vecteur initial.\newline
\\
On fait :
\begin{lstlisting}[language=html]
> vec1
[1] 2.8 2.4 2.1 3.6 2.8
> sin(vec1)
[1]  0.3349882  0.6754632  0.8632094 -0.4425204  0.3349882
\end{lstlisting}
On fait :
\begin{lstlisting}[language=html]
> vec1
[1] 2.8 2.4 2.1 3.6 2.8
> log(vec1)+3
[1] 4.029619 3.875469 3.741937 4.280934 4.029619
\end{lstlisting}
On considère les commandes :
\begin{lstlisting}[language=html]
> round(c(9.238, -1.34222))
[1]  9 -1
\end{lstlisting}
On obtient alors les valeurs arrondies des éléments du vecteur : c(9.238, -1.34222).

\subsubsection*{Application d'une fonction : vecteur longueur k $\longrightarrow $ une valeur numérique}
Pour les fonctions : \textit{length, sum, cumsum, prod, cumprod, min, max, which.min, which.max, mean,
var et sd (et bien d'autres)}, l'application à un vecteur donne une valeur numérique.\newline
\\
On considère les commandes :
\begin{lstlisting}[language=html]
> vec5
 [1] 2.8 2.8 2.4 2.1 2.1 2.1 3.6 3.6 3.6 2.8 2.8
> length(vec5)
[1] 11
\end{lstlisting}
Ainsi, le vecteur vec5 est de taille 11 (il a 11 éléments).\newline
\\
On fait :
\begin{lstlisting}[language=html]
> vec8
[1] 41.8 -0.3 92.0
> which.min(vec8)
[1] 2
\end{lstlisting}
Ainsi, la plus petite valeur de vec8 se situe au $2^{\textrm{ème}}$ élèment (c'est -0.3). Pour l'obtenir : 
\begin{lstlisting}[language=html]
vec8
vec8[which.min(vec8)]
\end{lstlisting}
On fait :
\begin{lstlisting}[language=html]
> vec1
[1] 2.8 2.4 2.1 3.6 2.8
> mean(vec1)
[1] 2.74
\end{lstlisting}
On obtient alors la moyenne des valeurs des éléments de vec1.\newline
\\
On considère les commandes :
\begin{lstlisting}[language=html]
> vec1
[1] 2.8 2.4 2.1 3.6 2.8
> sd(vec1)
[1] 0.5639149
\end{lstlisting}
On obtient alors l'écart-type corrigé des valeurs des éléments de vec1 de formule générale :

$$s = \sqrt{\frac{1}{n-1}\sum_{i=1}^{n}(x_{i}-\bar{x})^{2}}$$

On peut vérifier cette formule avec les commandes :
\begin{lstlisting}[language=html]
> vec1
[1] 2.8 2.4 2.1 3.6 2.8
> sd(vec1)
[1] 0.5639149
> sqrt((1 / (length(vec1) - 1)) * sum((vec1 - mean(vec1))^2))
[1] 0.5639149
\end{lstlisting}
On fait :
\begin{lstlisting}[language=html]
> vec3
[1]  TRUE  TRUE FALSE FALSE FALSE
> sum(vec3)
[1] 2
\end{lstlisting}
Ainsi, les éléments du vecteur logique vec3 ont été codés numériquement avec $0$ pour F et $1$ pour T, et on a fait la somme de ces valeurs binaires.

\subsection*{Opérations sur les vecteurs chaînes de caractères}

\subsubsection*{Concaténer deux chaînes.}

On fait :
\begin{lstlisting}[language=html]
> paste("jules", "jim")
[1] "jules jim"
\end{lstlisting}
On considère les commandes :
\begin{lstlisting}[language=html]
> paste("jules", "jim", sep = "")
[1] "julesjim"
> paste("jules", "jim", sep = ".")
[1] "jules.jim"
> paste("jules", "jim", sep = "@")
[1] "jules@jim"
\end{lstlisting}
Ainsi, le séparateur \textbf{par défaut est un espace}.

\subsubsection*{Concaténer deux (ou plus) vecteurs de chaînes de caractères.}

On considère les commandes :
\begin{lstlisting}[language=html]
> paste("X", 1:4, sep = "")
[1] "X1" "X2" "X3" "X4"
\end{lstlisting}
On fait :
\begin{lstlisting}[language=html]
> paste("X", 1:4, c("s", "o"), sep = "")
[1] "X1s" "X2o" "X3s" "X4o"
\end{lstlisting}
\subsection*{Opération sur les vecteurs logiques}
\subsubsection*{Opérateurs de comparaison.}
On utilise les opérateurs de comparaison suivants :
\begin{itemize}
  \item égal $==$
  \item strictement plus petit $<$
  \item strictement plus grand $>$
  \item plus petit ou égal $<=$
  \item plus grand ou égal $>=$
  \item différent $!=$
\end{itemize}
On considère les commandes :
\begin{lstlisting}[language=html]
> a = c(1, 4, -2, 5)
> b = c(2, 4, -3, 6)
> a < b
[1]  TRUE FALSE FALSE  TRUE
\end{lstlisting}
Ainsi, quand deux vecteurs $a$ et $b$ ont même longueur, le résultat de la comparaison est un vecteur logique de même longueur que $a$ et $b$ et dont le $i^{\textrm{ème}}$ élément est le résultat de la comparaison des $i^{\textrm{ème}}$ éléments de $a$ et $b$.
\begin{lstlisting}[language=html]
> a = c(1, 4, -2, 5, 6, 7, -1)
> b = c(1, 4, -3, 5, 6, 7, -2)
> a == b
[1]  TRUE  TRUE FALSE  TRUE  TRUE  TRUE FALSE
\end{lstlisting}
On considère les commandes :
\begin{lstlisting}[language=html]
> vec1
[1] 2.8 2.4 2.1 3.6 2.8
> vec1 > 2.7
[1]  TRUE FALSE FALSE  TRUE  TRUE
\end{lstlisting}

En réalité, le logiciel \textbf{R} a effectué :
\begin{lstlisting}[language=html]
> vec1 > c(2.7, 2.7, 2.7, 2.7, 2.7)
[1]  TRUE FALSE FALSE  TRUE  TRUE
\end{lstlisting}
On considère les commandes :
\begin{lstlisting}[language=html]
> a = c(3, 2, 8, 3, -3)
> b = c(1, 2)
> a <= b
[1] FALSE  TRUE FALSE FALSE  TRUE
\end{lstlisting}
En réalité, le logiciel \textbf{R} a effectué :
\begin{lstlisting}[language=html]
> a <= c(1, 2, 1, 2, 1)
[1] FALSE  TRUE FALSE FALSE  TRUE
\end{lstlisting}
Ainsi, quand un vecteur $a$ est de plus grande longueur qu'un vecteur $b$, lorsqu'on les compare, $b$ est répliqué en un vecteur $b^{*}$ jusqu'à ce qu'il atteigne la longueur de $a$. Le résultat de la comparaison est un vecteur logique de même longueur que $a$ et dont le $i^{\textrm{ème}}$ élément est le résultat de la comparaison des $i^{\textrm{ème}}$ éléments de a et $b^{*}$.\newline
\\
Ceci permet de construire un vecteur où seuls les éléments vérifient la relation de comparaison :
\begin{lstlisting}[language=html]
> vec1
[1] 2.8 2.4 2.1 3.6 2.8
> vec1 > 2.7
[1]  TRUE FALSE FALSE  TRUE  TRUE
> vec1[vec1 > 2.7]
[1] 2.8 3.6 2.8
\end{lstlisting}
On obtient ainsi un vecteur ayant pour éléments ceux du vecteur vec1 dont les valeurs sont strictement supérieures à 2.7.\newline
\\
On fait :
\begin{lstlisting}[language=html]
> vec1
[1] 2.8 2.4 2.1 3.6 2.8
> vec1 > 2.7
[1]  TRUE FALSE FALSE  TRUE  TRUE
> sum(vec1 > 2.7)
[1] 3
\end{lstlisting}
On a ainsi compté le nombre d'éléments de vec1 dont les valeurs sont strictement supérieures à 2.7.
\subsubsection*{Opérateurs appliqués à des vecteurs logiques.}
On utilise les opérateurs appliqués à des vecteurs logiques suivants :

\begin{itemize}
  \item ou $|$
  \item et $\&$
  \item négation $!$
  \item \textit{any} appliqué à un vecteur logique renvoie TRUE si au moins un des éléments du vecteur vérifie la relation de comparaison.
  \item \textit{all} appliqué à un vecteur logique renvoie TRUE si tous les éléments du vecteur vérifient la relation de comparaison.
\end{itemize}

On considère les commandes :
\begin{lstlisting}[language=html]
> vec1
[1] 2.8 2.4 2.1 3.6 2.8
> (vec1 > 2.7 | vec1 < 2)
[1]  TRUE FALSE FALSE  TRUE  TRUE
\end{lstlisting}
On considère les commandes :
\begin{lstlisting}[language=html]
> vec1
[1] 2.8 2.4 2.1 3.6 2.8
> (vec1 > 2.7 & vec1 < 2)
[1] FALSE FALSE FALSE FALSE FALSE
\end{lstlisting}
on fait : 
\begin{lstlisting}[language=html]
> all(c(4, 1, 3, 2, -1) <= c(2, 4))
[1] FALSE
\end{lstlisting}
\begin{lstlisting}[language=html]
> any(c(4, 1, 3, 2, -1) <= c(2, 4))
[1] TRUE
\end{lstlisting}

\section{Opérations sur les listes}
\subsection*{Attribuer des labels aux éléments d'une liste.}
On fait :
\begin{lstlisting}[language=html]
> vec1
[1] 2.8 2.4 2.1 3.6 2.8
> mat1
     [,1] [,2] [,3] [,4] [,5]
[1,]  2.8  2.1  2.8  2.4  3.6
[2,]  2.4  3.6  2.8  2.1  2.8
> list1 = list(vec1, c("rouge", "bleu"), mat1)
> list1
[[1]]
[1] 2.8 2.4 2.1 3.6 2.8

[[2]]
[1] "rouge" "bleu" 

[[3]]
     [,1] [,2] [,3] [,4] [,5]
[1,]  2.8  2.1  2.8  2.4  3.6
[2,]  2.4  3.6  2.8  2.1  2.8

> names(list1) = c("poids", "couleur", "matrice")
> list1
$poids
[1] 2.8 2.4 2.1 3.6 2.8

$couleur
[1] "rouge" "bleu" 

$matrice
     [,1] [,2] [,3] [,4] [,5]
[1,]  2.8  2.1  2.8  2.4  3.6
[2,]  2.4  3.6  2.8  2.1  2.8
\end{lstlisting}

Ou alors, plus directement :
\begin{lstlisting}[language=html]
> list2 = list(poids = vec1, couleur = c("rouge", "bleu"), matrice = mat1)
> list2
$poids
[1] 2.8 2.4 2.1 3.6 2.8

$couleur
[1] "rouge" "bleu" 

$matrice
     [,1] [,2] [,3] [,4] [,5]
[1,]  2.8  2.1  2.8  2.4  3.6
[2,]  2.4  3.6  2.8  2.1  2.8
\end{lstlisting}
\subsection*{Extraire un élément d'une liste.}

On considère les commandes :
\begin{lstlisting}[language=html]
> list1
$poids
[1] 2.8 2.4 2.1 3.6 2.8

$couleur
[1] "rouge" "bleu" 

$matrice
     [,1] [,2] [,3] [,4] [,5]
[1,]  2.8  2.1  2.8  2.4  3.6
[2,]  2.4  3.6  2.8  2.1  2.8

> list1$couleur
[1] "rouge" "bleu"
\end{lstlisting}
On considère les commandes :
\begin{lstlisting}[language=html]
> list1
$poids
[1] 2.8 2.4 2.1 3.6 2.8

$couleur
[1] "rouge" "bleu" 

$matrice
     [,1] [,2] [,3] [,4] [,5]
[1,]  2.8  2.1  2.8  2.4  3.6
[2,]  2.4  3.6  2.8  2.1  2.8

> list1[[2]]
[1] "rouge" "bleu"
\end{lstlisting}
\section{Opérations sur les matrices}
\subsection*{Attribuer des labels aux lignes et colonnes.}
On fait :
\begin{lstlisting}[language=html]
> vec1
[1] 2.8 2.4 2.1 3.6 2.8
> vec4
 [1] 2.8 2.4 2.1 3.6 2.8 2.8 2.4 2.1 3.6 2.8
> mat1
     [,1] [,2] [,3] [,4] [,5]
[1,]  2.8  2.1  2.8  2.4  3.6
[2,]  2.4  3.6  2.8  2.1  2.8
> dimnames(mat1) = list(c("jules", "jim"), paste("X", 1:5, sep = ""))
> mat1
       X1  X2  X3  X4  X5
jules 2.8 2.1 2.8 2.4 3.6
jim   2.4 3.6 2.8 2.1 2.8
\end{lstlisting}
On considère les commandes :
\begin{lstlisting}[language=html]
> mat1["jim", "X3"]
[1] 2.8
\end{lstlisting}
On peut enlever les labels attribués en faisant :
\begin{lstlisting}[language=html]
> mat1
       X1  X2  X3  X4  X5
jules 2.8 2.1 2.8 2.4 3.6
jim   2.4 3.6 2.8 2.1 2.8
> dimnames(mat1) = c()
> mat1
     [,1] [,2] [,3] [,4] [,5]
[1,]  2.8  2.1  2.8  2.4  3.6
[2,]  2.4  3.6  2.8  2.1  2.8
\end{lstlisting}
\subsection*{Opérations arithmétiques.}

On fait :
\begin{lstlisting}[language=html]
> mat1
     [,1] [,2] [,3] [,4] [,5]
[1,]  2.8  2.1  2.8  2.4  3.6
[2,]  2.4  3.6  2.8  2.1  2.8
> mat1 + 5
     [,1] [,2] [,3] [,4] [,5]
[1,]  7.8  7.1  7.8  7.4  8.6
[2,]  7.4  8.6  7.8  7.1  7.8
\end{lstlisting}
On considère les commandes :
\begin{lstlisting}[language=html]
> mat1
     [,1] [,2] [,3] [,4] [,5]
[1,]  2.8  2.1  2.8  2.4  3.6
[2,]  2.4  3.6  2.8  2.1  2.8
> mat2
     [,1] [,2] [,3] [,4] [,5]
[1,]  2.8  2.4  2.1  3.6  2.8
[2,]  2.8  2.4  2.1  3.6  2.8
> mat1 + mat2
     [,1] [,2] [,3] [,4] [,5]
[1,]  5.6  4.5  4.9  6.0  6.4
[2,]  5.2  6.0  4.9  5.7  5.6
\end{lstlisting}


\subsection*{Opérations spécifiques.}
\subsubsection*{Produit de matrices.}
On considère les commandes :

\begin{lstlisting}[language=html]
> mat4 = diag(c(2, 1, 5))
> mat4
     [,1] [,2] [,3]
[1,]    2    0    0
[2,]    0    1    0
[3,]    0    0    5
> A = matrix(1:9, ncol = 3)
> A
     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9
> A \% * \% mat4
     [,1] [,2] [,3]
[1,]    2    4   35
[2,]    4    5   40
[3,]    6    6   45
\end{lstlisting}

On fait :
\begin{lstlisting}[language=html]
> A
     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9
> B = matrix(c(1, 3, 4, 5, 2, 7, 8, 9, 6), ncol = 3);B
     [,1] [,2] [,3]
[1,]    1    5    8
[2,]    3    2    9
[3,]    4    7    6
> A \% * \% B
     [,1] [,2] [,3]
[1,]   41   62   86
[2,]   49   76  109
[3,]   57   90  132
\end{lstlisting}
\subsubsection*{Transposée d'une matrice.}
On fait :
\begin{lstlisting}[language=html]
> mat1
     [,1] [,2] [,3] [,4] [,5]
[1,]  2.8  2.1  2.8  2.4  3.6
[2,]  2.4  3.6  2.8  2.1  2.8
> t(mat1)
     [,1] [,2]
[1,]  2.8  2.4
[2,]  2.1  3.6
[3,]  2.8  2.8
[4,]  2.4  2.1
[5,]  3.6  2.8
\end{lstlisting}
On considère les commandes :
\begin{lstlisting}[language=html]
> A
     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9
> t(A)
     [,1] [,2] [,3]
[1,]    1    2    3
[2,]    4    5    6
[3,]    7    8    9
\end{lstlisting}

\subsubsection*{Déterminant d'une matrice.}

On fait :
\begin{lstlisting}[language=html]
> mat4
     [,1] [,2] [,3]
[1,]    2    0    0
[2,]    0    1    0
[3,]    0    0    5
> det(mat4)
[1] 10
\end{lstlisting}
On fait :
\begin{lstlisting}[language=html]
> det(mat4)
[1] 10
> B
     [,1] [,2] [,3]
[1,]    1    5    8
[2,]    3    2    9
[3,]    4    7    6
> det(B)
[1] 143
\end{lstlisting}
\subsubsection*{Inverse d'une matrice.}
On fait :
\begin{lstlisting}[language=html]
> mat4
     [,1] [,2] [,3]
[1,]    2    0    0
[2,]    0    1    0
[3,]    0    0    5
> solve(mat4)
     [,1] [,2] [,3]
[1,]  0.5    0  0.0
[2,]  0.0    1  0.0
[3,]  0.0    0  0.2
\end{lstlisting}
On remarque alors que la matrice obtenue multipliée par mat4 donne bien la matrice identité ; \textit{solve(mat4)} est l'\underline{inverse} de mat4.\newline
\\
On fait :
\begin{lstlisting}[language=html]
> B
     [,1] [,2] [,3]
[1,]    1    5    8
[2,]    3    2    9
[3,]    4    7    6
> solve(B)
            [,1]        [,2]        [,3]
[1,] -0.35664336  0.18181818  0.20279720
[2,]  0.12587413 -0.18181818  0.10489510
[3,]  0.09090909  0.09090909 -0.09090909
\end{lstlisting}
\section{Pour aller plus loin}
\subsection*{Commandes Help et Help.search}
Dans la fenêtre \textit{"R Console"}, pour avoir les détails d'un l'objet R ainsi que plusieurs exemples d'utilisation, utiliser la commande help sous la forme \textit{help("objet") (help("matrix"), help("sin"), help("solve")\dots)}. Vous pouvez alors approfondir des objets R inconnus que vous rencontrerez au fil de vos lectures. Essayer, par exemple : help("which.min"), help("which.max"), help("cumprod"), help("function"), help("data.frame"), help("summary"), help("table").\newline
Si le nom d'un objet R vous échappe, il existe un moteur de recherche qui permet de le retrouver.\newline
Pour cela, dans la fenêtre \textit{"R Console"}, utiliser la commande help.search sous la forme help.search("objet") (help.search("diagonale"), help.search("transpose")\dots). Vous aurez alors une liste d'objet R, dont peut-être celui qui vous intéresse.
\subsection*{Installer un package}
Il est possible que l'objet R qui vous intéresse se trouve dans un "package" qu'il faut installer.
\begin{itemize}
  \item Lancer le logiciel R, cliquer sur l'option \textcolor{blue}{Packages}
  \item Cliquer sur l'option \textcolor{blue}{Install package(s)}
  \item Une fenêtre \textcolor{blue}{HTTPS CRAN mirror} s'affiche
  \item Double-cliquer sur l'option France \textcolor{blue}{(Lyon 1)[https]}
  \item Une fenêtre \textcolor{blue}{Packages} s'affiche
  \item Double-cliquer sur le package de votre choix, lançant ainsi son installation.
\end{itemize}
Une fois l'installation terminée, pour charger le package, dans le fenêtre \textit{"R Console"}, faire :
\begin{lstlisting}[language=html]
library(nomdupackage)
\end{lstlisting}
Vous pouvez alors appeler votre objet \textit{R} avec les commandes adequates.
\subsection*{R-studio}
Il est important de se familiariser avec \underline{\href{https://www.rstudio.com/}{R-studio}} qui est aujourd'hui l'environnement de développement \textbf{R} le plus utilisé.

\section{Exercices}
\subsection{Enoncés}

\subsubsection{Exercice 1}
On définit trois vecteurs $x$, $y$ et $z$ par les commandes \textbf{R} suivantes :
\begin{lstlisting}[language=html]
x = c(1, 3, 5, 7, 9)
y = c(2, 3, 5, 7, 11, 13)
z = c(9, 3, 2, 5, 9, 2, 3, 9, 1)
\end{lstlisting}
Reproduire et comprendre les résultats des commandes \textbf{R} suivantes :
\begin{multicols}{3}
\begin{itemize}
  \item x + 2
  \item y * 3
  \item length(x)
  \item x + y
  \item sum(x > 5)
  \item sum(x[x > 5])
  \item sum(x > 5 | x < 3)
  \item y[3]
  \item y[-3]
  \item y[x]
  \item (y > 7)
  \item y[y > 7]
  \item sort(z)
  \item sort(z, dec = TRUE)
  \item rev(z)
  \item order(z)
  \item unique(z)
  \item duplicated(z)
  \item table(z)
  \item rep(z, 3)
\end{itemize}
\end{multicols}

\subsubsection{Exercice 2}
Créer les vecteurs suivants :
\begin{enumerate}
  \item $x_{0} = (51, 64, 71, 82, 98, 107)$
  \item $x_{1}$ constitué de 5 fois la suite de nombres (5, 6, 3),
  \item $x_{2}$ constitué de un 1, deux 2, trois 3, \dots, dix 10,
  \item $x_{3}$ constitué de 7 noms de votre choix.
\end{enumerate}
\subsubsection{Exercice 3}
Créer deux vecteurs de dimensions quelconques. Créer un vecteur en insérant le second vecteur entre les $2^{\textrm{ème}}$ et $3^{\textrm{ème}}$ éléments du premier vecteur.
\subsubsection{Exercice 4}
Créer un vecteur dont les valeurs des éléments sont $e^{x}\sin(x)$, avec $x = 2, 2.1, 2.2, \dots , 7.9, 8$.
\subsubsection{Exercice 5}
On définit un vecteur x par les commandes \textbf{R} suivantes :
$x = c (4.12, 1.84, 4.28, 4.23, 1.74, 2.06, 3.37, 3.83, 5.15, 3.76, 3.23, 4.87, 5.96, 2.29, 4.58)$
\begin{enumerate}
  \item Créer un vecteur égal à $x$ sans ses 4 premiers éléments.
  \item Créer un vecteur égal à $x$ sans ses $1^{\textrm{er}}$ et $15^{\textrm{ème}}$ éléments.
  \item Créer un vecteur contenant les éléments de $x$ dont les valeurs sont strictement supérieures à $2.57$ \textbf{et} strictement inférieures à $3.48$.
  \item Créer un vecteur contenant les éléments de $x$ dont les valeurs sont strictement supérieures à $4.07$ \textbf{ou} strictement inférieures à $1.48$.
  \item Déterminer la coordonnée de la plus petite valeur des éléments de $x$.
\end{enumerate}
\subsubsection{Exercice 6}
On considère deux vecteurs numériques à $n$ éléments : $x = (x_{1}, \dots ,x_{n})$ et $y = (y_{1}, \dots , y_{n})$, que l'on crée dans \textbf{R}. On les note $x$ et $y$.\newline
Expliciter les vecteurs que l'on crées en faisant :
\begin{enumerate}
  \item 
  \begin{lstlisting}[language=html]
  a = y[-1] - x[-length(x)]
  \end{lstlisting}
  \item 
  \begin{lstlisting}[language=html]
  b = cos(y[-length(y)]) / sin(x[-1])
  \end{lstlisting}
\end{enumerate}
\subsubsection{Exercice 7}
\begin{enumerate}
  \item Créer les vecteurs suivants :
  \begin{enumerate}
    \item $y_{0}$ constitué de la suite des entiers de 0 à 10 par pas de 2,
    \item $y_{1}$ constitué de tous les entiers pairs entre 1 et 18,
    \item $y_{2}$ constitué de 20 fois de suite la valeur 4,
    \item $y_{3}$ constitué de 20 nombres entre 0 et 10.
  \end{enumerate}
  \item Extraire de $y_{3}$ :
  \begin{enumerate}
    \item le $3^{\textrm{ème}}$ élément,
    \item tous les éléments sauf le $3^{\textrm{ème}}$.
  \end{enumerate}
  \item Commenter les commandes suivantes :
  \begin{enumerate}
    \item matrix(y3, nrow = 2)
    \item matrix(y3, byrow = TRUE)
  \end{enumerate}
  \item Construire une matrice $A$ comportant quatre lignes et trois colonnes remplies par lignes successives avec les éléments du vecteur 1:12.
  \item Construire une matrice $B$ comportant quatre lignes et trois colonnes remplies par colonnes successives avec les éléments du vecteur 1:12.
  \item Extraire l'élément situé en $2^{\textrm{ème}}$ ligne et $3^{\textrm{ème}}$ colonne de $A$.
  \item Extraire la $1^{\textrm{ère}}$ colonne de $A$, puis la $2^{\textrm{ème}}$ ligne de $A$.
  \item Construire une matrice $C$ constituée des $1^{\textrm{ère}}$ et $4^{\textrm{ème}}$ ligne de $A$.
\end{enumerate}
\subsubsection{Exercice 8}
Construire une matrice comportant $9$ lignes et $9$ colonnes avec des $0$ sur la diagonale et des $1$ partout ailleurs (on pourra utiliser la commande diag).

\subsubsection{Exercice 9}
On définit deux vecteurs $x$ et $y$ par les commandes \textbf{R} suivantes :
\begin{lstlisting}[language=html]
x = 1:6
y = 5:10
\end{lstlisting}
\begin{enumerate}
  \item Remplacer les éléments de $x + y$ dont les valeurs sont supérieures à 11 par 1.
  \item Calculer le produit scalaire de $x$ et $y$.
  \item On définit la matrice $M$ par les commandes \textbf{R} suivantes :
  \begin{lstlisting}[language=html]
    M = matrix(1:36, nrow = 6)
  \end{lstlisting}
  Calculer : 
  \begin{enumerate}
    \item $Mx$
    \item $xM$
    \item $~^t M$
    \item $M ~^t M$
  \end{enumerate}
\end{enumerate}
\subsubsection{Exercice 10}
Proposer des commandes R renvoyant la matrice :

\begin{lstlisting}[language=html]
John Lilly Stef Bob Anna Marik Boris
Poids 95 68 85 72 55 86 115
Taille 189 169 179 167 171 178 179
\end{lstlisting}

\subsubsection{Exercice 11}
On considère les matrices :
$$A = \begin{pmatrix}
-2 & 1 & -3 & -2 \\
1 & 2 & 1 & 1 \\
-2 & 1 & 1 & -1 \\
-1 & -3 & 1 & 1 
\end{pmatrix}$$
et 
$$B = \begin{pmatrix}
2 & -1 & 3 & -4 \\
2 & -2 & 4 & -5 \\
-2 & 1 & 3 & -1 \\
-1 & -3 & 1 & -1 
\end{pmatrix}$$
\begin{enumerate}
  \item Montrer que $A$ et $B$ sont inversibles, puis calculer leurs inverses.
  \item Vérifier que $\textrm{det}(~^t A) = \textrm{det}(A)$, $\textrm{det}(A^{-1}) = 1/ \textrm{det}(A)$ et $\textrm{det}(AB) = \textrm{det}(A)\textrm{det}(B)$.
  \item Vérifier que $~^t (A^{-1}) = (~^t A)^{-1}$, $~^t (AB) = ~^t A (~^t B)$ et $(AB)^{-1} = B^{-1}A^{-1}$
\end{enumerate}
\subsubsection{Exercice 12}
On considère la matrice :
$$A = \begin{pmatrix}
1 & 1 & 3\\
5 & 2 & 6\\
-2 & -1 & -3 
\end{pmatrix}$$
\begin{enumerate}
  \item Montrer que $A$ est nilpotente, \textit{i.e.} il existe un entier $n \in \mathbb{N}$ tel que $A^{n}$ est la matrice nulle.
  \item Remplacer la $3^{\textrm{ème}}$ ligne de $A$ par la somme des deux premières.
\end{enumerate}
\subsubsection{Exercice 13}
On considère la fonction $f : \mathbb{R} \rightarrow \mathbb{R}$ définie par : 
$$f(x) = ax^{2} + bx + c$$
où $a$, $b$ et $c$ sont trois réels inconnus tels que :
$$f(0.5) = 7 \textrm{, } f(1) = 4\textrm{, } f(1.5) = 5$$
\begin{enumerate}
  \item Créer dans \textbf{R} la matrice $X$ telle que les informations dont on dispose sur $f$ se traduisent sous la forme matricielle :
  $$X \beta = r\textrm{ avec } \beta = \begin{pmatrix}
a \\
b \\
c
\end{pmatrix}\textrm{ et } r = \begin{pmatrix}
7\\
4\\
5
\end{pmatrix}$$
  \item Montrer que $X$ est inversible et calculer $X^{-1}$.
  \item Déterminer $a$, $b$ et $c$.
\end{enumerate}
\subsubsection{Exercice 14}
On considère la matrice $B$ décrite par les commandes suivantes :
\begin{lstlisting}[language=html]
A = matrix(0, nrow = 5, ncol = 5)
B = abs(col(A) - row(A)) + 1
\end{lstlisting}
\begin{enumerate}
  \item Montrer que $B$ est inversible et calculer $B^{-1}$.
  \item On considère le système linéaire à 5 réels inconnus : $a$, $b$, $c$, $d$ et $e$, défini par :
  $$\left
\{
\begin{array}{c}
a + 2b + 3c + 4d + 5e = 1\\
2a + b + 2c + 3d + 4e = 2\\
3a + 2b + c + 2d + 3e = 2\\
4a + 3b + 2c + d + 2e = 3\\
5a + 4b + 3c + 2d + e = 2
\end{array}
\right.$$
Résoudre ce système en utilisant la matrice B.
\end{enumerate}

\subsection{Solutions}
\subsubsection{Exercice 1}
\begin{lstlisting}[language=html]
> setwd("~[...]StatDesR/TP")
> x = c(1, 3, 5, 7, 9)
> y = c(2, 3, 5, 7, 11, 13)
> z = c(9, 3, 2, 5, 9, 2, 3, 9, 1)
\end{lstlisting}
Et c'est parti : 
\begin{lstlisting}[language=html]
> x+2
[1]  3  5  7  9 11
\end{lstlisting}
\begin{lstlisting}[language=html]
> y*3
[1]  6  9 15 21 33 39
\end{lstlisting}
\begin{lstlisting}[language=html]
> length(x)
[1] 5
\end{lstlisting}
On obtient ainsi le nombre d'éléments dans $x$.
\begin{lstlisting}[language=html]
> x + y
[1]  3  6 10 14 20 14
\end{lstlisting}
\textcolor{red}{\textbf{Warning message :} In x + y :\newline
la taille d'un objet plus long n'est pas multiple de la taille d'un objet plus court}
\begin{lstlisting}[language=html]
> sum(x)
[1] 25
\end{lstlisting}
Retourne la somme des éléments de $x$
\begin{lstlisting}[language=html]
> sum(x>5)
[1] 2
\end{lstlisting}
Ainsi, on a le nombre d'éléments de $x$ dont les valeurs sont supérieures 5 (soient $7$ et $9$).
\begin{lstlisting}[language=html]
> sum(x[x > 5])
[1] 16
\end{lstlisting}
On a ainsi la somme des valeurs des éléments de $x$ supérieurs à 5 (soit $7 + 9$)
\begin{lstlisting}[language=html]
> sum(x > 5 | x < 3)
[1] 3
\end{lstlisting}
C'est le nombre d'éléments de $x$ dont les valeurs sont strictement supérieures 5 et strictement inférieures 3 (soient 1, 7 et 9).
\begin{lstlisting}[language=html]
> y[3]
[1] 5
\end{lstlisting}
On a alors la valeur du $3^{\textrm{ème}}$ élément de $y$.
\begin{lstlisting}[language=html]
> y[-3]
[1]  2  3  7 11 13
\end{lstlisting}
Ainsi, on a le vecteur $y$ privé du $3^{\textrm{ème}}$ élément.
\begin{lstlisting}[language=html]
> x
[1] 1 3 5 7 9
> length(y)
[1] 6
> y[x]
[1]  2  5 11 NA NA
\end{lstlisting}
On obtient alors un vecteur composé du $1^{\textrm{er}}$ élément de $y$, donc 2, puis du $3^{\textrm{ème}}$ élément de $y$,donc 5, puis du $5^{\textrm{ème}}$ élément de $y$, donc 11, puis du $7^{\textrm{ème}}$ élément de $y$, donc rien, d'où le \textit{NA = Non Available}, et enfin, du $9^{\textrm{ème}}$ élément de $y$, donc rien, d'où le \textit{NA}.
\begin{lstlisting}[language=html]
> (y > 7)
[1] FALSE FALSE FALSE FALSE  TRUE  TRUE
\end{lstlisting}
On a ainsi un vecteur logique dont les éléments sont \textit{TRUE} si la valeur de l'élément de $y$ associé est supérieure 7, et \textit{FALSE} sinon.
\begin{lstlisting}[language=html]
> y[y > 7]
[1] 11 13
\end{lstlisting}
On a alors un vecteur contenant les éléments de $y$ dont les valeurs sont supérieures 7.
\begin{lstlisting}[language=html]
> sort(z)
[1] 1 2 2 3 3 5 9 9 9
\end{lstlisting}
On obtient ainsi un vecteur dont les éléments sont ceux de $z$ ordonnés par ordre croissant de leurs valeurs.
\begin{lstlisting}[language=html]
> sort(z, dec = TRUE)
[1] 9 9 9 5 3 3 2 2 1
\end{lstlisting}
On obtient ainsi un vecteur dont les éléments sont ceux de $z$ ordonnés par ordre décroissant de leurs valeurs.
\begin{lstlisting}[language=html]
> z
[1] 9 3 2 5 9 2 3 9 1
> rev(z)
[1] 1 9 3 2 9 5 2 3 9
\end{lstlisting}
On a un vecteur qui réarrange les éléments du vecteur $z$ en sens inverse.
\begin{lstlisting}[language=html]
> order(z)
[1] 9 3 6 2 7 4 1 5 8
\end{lstlisting}
On obtient ainsi le vecteur des rangs de classement des valeurs des éléments de $z$ par ordre croissant (la plus petite valeur est en $9^{\textrm{ème}}$ position, la $2^{\textrm{ème}}$ plus petite est en $3^{\textrm{ème}}$ position\dots).
\begin{lstlisting}[language=html]
> unique(z)
[1] 9 3 2 5 1
\end{lstlisting}
On a ainsi un vecteur dont les éléments sont ceux de $z$ privés des doublons.
\begin{lstlisting}[language=html]
> duplicated(z)
[1] FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE FALSE
\end{lstlisting}
On a ainsi un vecteur logique dont les éléments sont \textit{TRUE} si la valeur de l'élément $z$ commence à être répété (de gauche à droite).
\begin{lstlisting}[language=html]
> table(z)
z
1 2 3 5 9 
1 2 2 1 3 
\end{lstlisting}
Ainsi, on obtient un vecteur dont les valeurs des éléments
précisent le nombre de fois qu'apparaissent les chiffres : 1, 2, 3, 5 et 9.
\begin{lstlisting}[language=html]
> rep(z, 3)
 [1] 9 3 2 5 9 2 3 9 1 9 3 2 5 9 2 3 9 1 9 3 2 5 9 2 3 9 1
\end{lstlisting}
On a ainsi un vecteur qui concatène 3 fois le vecteur $z$.

\subsubsection{Exercice 2}
\begin{enumerate}
  \item On fait :
\begin{lstlisting}[language=html]
> x0 <- c(51, 64, 71, 82, 98, 107);x0
[1]  51  64  71  82  98 107
\end{lstlisting}
  \item On fait :
\begin{lstlisting}[language=html]
> x1 = rep(c(5, 6, 3), 4);x1
[1] 5 6 3 5 6 3 5 6 3 5 6 3
\end{lstlisting}  
  \item On fait :
\begin{lstlisting}[language=html]
> x2 = rep(1:10, 1:10);x2
 [1]  1  2  2  3  3  3  4  4  4  4  5  5  5  5  5  6  6  6  6  6  6  7  7
[24]  7  7  7  7  7  8  8  8  8  8  8  8  8  9  9  9  9  9  9  9  9  9 10
[47] 10 10 10 10 10 10 10 10 10
\end{lstlisting}
  \item On fait :
\begin{lstlisting}[language=html]
> xN <- c("John", "Lilly", "Stef", "Bob", "Anna", "Marik", "Boris");xN
[1] "John"  "Lilly" "Stef"  "Bob"   "Anna"  "Marik" "Boris"
\end{lstlisting}
\end{enumerate}


\subsubsection{Exercice 3}
\begin{lstlisting}[language=html]
> x = 1:10;x
 [1]  1  2  3  4  5  6  7  8  9 10
> y = rep(0, 3);y
[1] 0 0 0
> z = c(x[1:2], y, x[3:length(x)]);z
 [1]  1  2  0  0  0  3  4  5  6  7  8  9 10
\end{lstlisting}

\subsubsection{Exercice 4}
\begin{lstlisting}[language=html]
abs <- seq(2,8,0.1);abs ## Equivalent de seq(2,8,by=0.1)
f = function(a){
  exp(a)*sin(a)
}
f(abs)
\end{lstlisting}
\subsubsection{Exercice 5}

\begin{lstlisting}[language=html]
abs <- seq(2,8,0.1);abs ## Equivalent
x = c (4.12, 1.84, 4.28, 4.23, 1.74, 2.06, 3.37, 3.83, 5.15, 3.76, 3.23, 4.87, 5.96, 2.29, 4.58)
\end{lstlisting}
\begin{enumerate}
  \item 
\begin{lstlisting}[language=html]
  > x1 = x[-(1:4)];x1
 [1] 1.74 2.06 3.37 3.83 5.15 3.76 3.23 4.87 5.96 2.29 4.58
\end{lstlisting}
 \item 
\begin{lstlisting}[language=html]
 > x2 = x[-c(1, 15)];x2
 [1] 1.84 4.28 4.23 1.74 2.06 3.37 3.83 5.15 3.76 3.23 4.87 5.96 2.29
\end{lstlisting}
 \item 
\begin{lstlisting}[language=html]
 > x3 = x[(x > 2.57) & (x < 3.48)];x3
[1] 3.37 3.23
\end{lstlisting}
\item 
\begin{lstlisting}[language=html]
> x4 = x[(x > 4.07) | (x < 1.48)];x4
[1] 4.12 4.28 4.23 5.15 4.87 5.96 4.58
\end{lstlisting}
\item 
\begin{lstlisting}[language=html]
> x
 [1] 4.12 1.84 4.28 4.23 1.74 2.06 3.37 3.83 5.15 3.76 3.23 4.87 5.96 2.29
[15] 4.58
> which.min(x)
[1] 5
> x[which.min(x)]
[1] 1.74
\end{lstlisting}
\end{enumerate}

\subsubsection{Exercice 6}
\begin{lstlisting}[language=html]
> n <- 10
> x = 1:n
> y = 1:n
> a = y[-1] - x[-length(x)];a
[1] 1 1 1 1 1 1 1 1 1
> b = cos(y[-length(y)]) / sin(x[-1]);b
[1]  0.5941976 -2.9488861  1.3081253  0.6816426 -1.0151985  1.4614762  0.7620114
[8] -0.3530539  1.6748068
\end{lstlisting}
On calcule les vecteurs :
$$a = (y_{2}-x_{1},y_{3}-x_{2},\dots,y_{n}-x_{n-1})$$
et
$$b = \left(\frac{\cos(y_{1})}{\sin(x_{2})},\frac{\cos(y_{2})}{\sin(x_{3})},\dots,\frac{\cos(y_{n})}{\sin(x_{n-1})} \right)$$

\subsubsection{Exercice 7}
\begin{enumerate}
  \item 
  \begin{enumerate}
    \item On fait :
\begin{lstlisting}[language=html]
    > y0 = seq(0, 10, 2)
    > y0
    [1]  0  2  4  6  8 10
 \end{lstlisting}   
    \item On fait :
\begin{lstlisting}[language=html]
    > y1 = seq(2, 18, 2)
    > y1
    [1]  2  4  6  8 10 12 14 16 18
\end{lstlisting}
    \item On fait :
\begin{lstlisting}[language=html]
    > y2 = rep(4, 20)
    > y2
    [1] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
\end{lstlisting}
    \item On fait :
\begin{lstlisting}[language=html]
    > y3bad = seq(0, 10,1/2)
    > y3bad
    [1]  0.0  0.5  1.0  1.5  2.0  2.5  3.0  3.5  4.0  4.5  5.0  5.5  6.0  6.5  7.0  7.5  8.0  8.5  9.0  9.5 10.0
    > length(y3bad)
    [1] 21
    > y3 = seq(0, 10, length.out = 20) ## On veut obtenir 20 valeurs comprises entre [0,10]
    > y3
    [1]  0.0000000  0.5263158  1.0526316  1.5789474  2.1052632  2.6315789  3.1578947  3.6842105  4.2105263  4.7368421  5.2631579  5.7894737  6.3157895  6.8421053
    [15]  7.3684211  7.8947368  8.4210526  8.9473684  9.4736842 10.0000000
    > length(y3)
    [1] 20
\end{lstlisting}
  \end{enumerate}

  \item 
  \begin{enumerate}
    \item On fait :
\begin{lstlisting}[language=html]
    > y3
    [1]  0.0000000  0.5263158  1.0526316  1.5789474  2.1052632  2.6315789  3.1578947  3.6842105  4.2105263  4.7368421  5.2631579  5.7894737  6.3157895  6.8421053
    [15]  7.3684211  7.8947368  8.4210526  8.9473684  9.4736842 10.0000000
    > y3[3]
    [1] 1.052632
 \end{lstlisting}   
    \item On fait :
\begin{lstlisting}[language=html]
    > y3
    [1]  0.0000000  0.5263158  1.0526316  1.5789474  2.1052632  2.6315789  3.1578947  3.6842105  4.2105263  4.7368421  5.2631579  5.7894737  6.3157895  6.8421053
    [15]  7.3684211  7.8947368  8.4210526  8.9473684  9.4736842 10.0000000
    > y3[-3]
    [1]  0.0000000  0.5263158  1.5789474  2.1052632  2.6315789  3.1578947  3.6842105  4.2105263  4.7368421  5.2631579  5.7894737  6.3157895  6.8421053  7.3684211
    [15]  7.8947368  8.4210526  8.9473684  9.4736842 10.0000000
\end{lstlisting}
  \end{enumerate}

  \item
\begin{lstlisting}[language=html]
  > y3
  [1]  0.0000000  0.5263158  1.0526316  1.5789474  2.1052632  2.6315789  3.1578947  3.6842105  4.2105263  4.7368421  5.2631579  5.7894737
  [13]  6.3157895  6.8421053  7.3684211  7.8947368  8.4210526  8.9473684  9.4736842 10.0000000
  > matrix(y3, nrow = 2)
            [,1]     [,2]     [,3]     [,4]     [,5]     [,6]     [,7]     [,8]     [,9]     [,10]
  [1,] 0.0000000 1.052632 2.105263 3.157895 4.210526 5.263158 6.315789 7.368421 8.421053  9.473684
  [2,] 0.5263158 1.578947 2.631579 3.684211 4.736842 5.789474 6.842105 7.894737 8.947368 10.000000
\end{lstlisting}
  Les commandes \textit{matrix(y3, nrow = 2)} transforment le vecteur $y_{3}$ en une matrice à 2 lignes et 10 colonnes.
\begin{lstlisting}[language=html]
  > y3
  [1]  0.0000000  0.5263158  1.0526316  1.5789474  2.1052632  2.6315789  3.1578947  3.6842105  4.2105263  4.7368421  5.2631579  5.7894737
  [13]  6.3157895  6.8421053  7.3684211  7.8947368  8.4210526  8.9473684  9.4736842 10.0000000
  > matrix(y3, byrow = TRUE)
              [,1]
  [1,]  0.0000000
  [2,]  0.5263158
  [3,]  1.0526316
  [4,]  1.5789474
  [5,]  2.1052632
  [6,]  2.6315789
  [7,]  3.1578947
  [8,]  3.6842105
  [9,]  4.2105263
 [10,]  4.7368421
 [11,]  5.2631579
 [12,]  5.7894737
 [13,]  6.3157895
 [14,]  6.8421053
 [15,]  7.3684211
 [16,]  7.8947368
 [17,]  8.4210526
 [18,]  8.9473684
 [19,]  9.4736842
 [20,] 10.0000000
\end{lstlisting}
  Les commandes \textit{matrix(y3, byrow = TRUE)} transforment le vecteur $y_{3}$ en un vecteur colonne.

  \item On fait :
\begin{lstlisting}[language=html]
  > A = matrix(1:12, nrow = 4, ncol = 3, byrow = TRUE)
  > A
       [,1] [,2] [,3]
  [1,]    1    2    3
  [2,]    4    5    6
  [3,]    7    8    9
  [4,]   10   11   12
\end{lstlisting}
  La matrice est remplie par lignes (\textit{byrow = TRUE})

  \item On fait :
\begin{lstlisting}[language=html]
  > B = matrix(1:12, nrow = 4, ncol = 3, byrow = FALSE)
  > B
      [,1] [,2] [,3]
  [1,]    1    5    9
  [2,]    2    6   10
  [3,]    3    7   11
  [4,]    4    8   12
\end{lstlisting}
   La matrice est remplie par colonnes (\textit{byrow = FALSE})

  \item On fait :
\begin{lstlisting}[language=html]
  > A
         [,1] [,2] [,3]
  [1,]    1    2    3
  [2,]    4    5    6
  [3,]    7    8    9
  [4,]   10   11   12
  > A[2, 3]
  [1] 6
\end{lstlisting}
  \textbf{A[lignes, colonnes]}

  \item On fait :
\begin{lstlisting}[language=html]
  > A
        [,1] [,2] [,3]
  [1,]    1    2    3
  [2,]    4    5    6
  [3,]    7    8    9
  [4,]   10   11   12
  ## La colonne
  > A[ ,1]
  [1]  1  4  7 10
  ## La ligne
  > A[2, ]
  [1] 4 5 6
\end{lstlisting}

  \item On fait :
\begin{lstlisting}[language=html]
  > A
       [,1] [,2] [,3]
  [1,]    1    2    3
  [2,]    4    5    6
  [3,]    7    8    9
  [4,]   10   11   12
  > C = A[c(1, 4), ]
  > C
       [,1] [,2] [,3]
  [1,]    1    2    3
  [2,]   10   11   12
\end{lstlisting}
\end{enumerate}

\subsubsection{Exercice 8}
On fait :
\begin{lstlisting}[language=html]
> matrix(1, 9, 9)
      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9]
 [1,]    1    1    1    1    1    1    1    1    1
 [2,]    1    1    1    1    1    1    1    1    1
 [3,]    1    1    1    1    1    1    1    1    1
 [4,]    1    1    1    1    1    1    1    1    1
 [5,]    1    1    1    1    1    1    1    1    1
 [6,]    1    1    1    1    1    1    1    1    1
 [7,]    1    1    1    1    1    1    1    1    1
 [8,]    1    1    1    1    1    1    1    1    1
 [9,]    1    1    1    1    1    1    1    1    1
> diag(9)
      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9]
 [1,]    1    0    0    0    0    0    0    0    0
 [2,]    0    1    0    0    0    0    0    0    0
 [3,]    0    0    1    0    0    0    0    0    0
 [4,]    0    0    0    1    0    0    0    0    0
 [5,]    0    0    0    0    1    0    0    0    0
 [6,]    0    0    0    0    0    1    0    0    0
 [7,]    0    0    0    0    0    0    1    0    0
 [8,]    0    0    0    0    0    0    0    1    0
 [9,]    0    0    0    0    0    0    0    0    1
> M = matrix(1, 9, 9) - diag(9)
> M
      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9]
 [1,]    0    1    1    1    1    1    1    1    1
 [2,]    1    0    1    1    1    1    1    1    1
 [3,]    1    1    0    1    1    1    1    1    1
 [4,]    1    1    1    0    1    1    1    1    1
 [5,]    1    1    1    1    0    1    1    1    1
 [6,]    1    1    1    1    1    0    1    1    1
 [7,]    1    1    1    1    1    1    0    1    1
 [8,]    1    1    1    1    1    1    1    0    1
 [9,]    1    1    1    1    1    1    1    1    0
\end{lstlisting}




\subsubsection{Exercice 9}

\begin{enumerate}
  \item On fait : 
\begin{lstlisting}[language=html]
  > x = 1:6
  > x
  [1] 1 2 3 4 5 6
  > y = 5:10
  > y
  [1]  5  6  7  8  9 10
  > z = x + y
  > z
  [1]  6  8 10 12 14 16
  > z[z > 11] = 1
  > z
  [1]  6  8 10  1  1  1
\end{lstlisting}
  \item On fait :
\begin{lstlisting}[language=html]
  > x
  [1] 1 2 3 4 5 6
  > y
  [1]  5  6  7  8  9 10
  ## Produit scalaire
  > x \% * \% y
       [,1]
  [1,]  175
\end{lstlisting}
  \item 


  \begin{itemize}
    \item On fait : 
\begin{lstlisting}[language=html]
  > M = matrix(1:36, nrow = 6)
  > M
       [,1] [,2] [,3] [,4] [,5] [,6]
  [1,]    1    7   13   19   25   31
  [2,]    2    8   14   20   26   32
  [3,]    3    9   15   21   27   33
  [4,]    4   10   16   22   28   34
  [5,]    5   11   17   23   29   35
  [6,]    6   12   18   24   30   36
  > x
  [1] 1 2 3 4 5 6
  > M \% * \% x
       [,1]
  [1,]  441
  [2,]  462
  [3,]  483
  [4,]  504
  [5,]  525
  [6,]  546
\end{lstlisting}
    \item On fait : 
\begin{lstlisting}[language=html]
  > M
       [,1] [,2] [,3] [,4] [,5] [,6]
  [1,]    1    7   13   19   25   31
  [2,]    2    8   14   20   26   32
  [3,]    3    9   15   21   27   33
  [4,]    4   10   16   22   28   34
  [5,]    5   11   17   23   29   35
  [6,]    6   12   18   24   30   36
  > x
  [1] 1 2 3 4 5 6
  > x \% * \% M
     [,1] [,2] [,3] [,4] [,5] [,6]
  [1,]   91  217  343  469  595  721
\end{lstlisting}
    \item On fait :
\begin{lstlisting}[language=html]
    > M
       [,1] [,2] [,3] [,4] [,5] [,6]
  [1,]    1    7   13   19   25   31
  [2,]    2    8   14   20   26   32
  [3,]    3    9   15   21   27   33
  [4,]    4   10   16   22   28   34
  [5,]    5   11   17   23   29   35
  [6,]    6   12   18   24   30   36
  > t(M)
       [,1] [,2] [,3] [,4] [,5] [,6]
  [1,]    1    2    3    4    5    6
  [2,]    7    8    9   10   11   12
  [3,]   13   14   15   16   17   18
  [4,]   19   20   21   22   23   24
  [5,]   25   26   27   28   29   30
  [6,]   31   32   33   34   35   36
\end{lstlisting}
    \item On fait :
\begin{lstlisting}[language=html]
    > M
       [,1] [,2] [,3] [,4] [,5] [,6]
  [1,]    1    7   13   19   25   31
  [2,]    2    8   14   20   26   32
  [3,]    3    9   15   21   27   33
  [4,]    4   10   16   22   28   34
  [5,]    5   11   17   23   29   35
  [6,]    6   12   18   24   30   36
  > t(M)
       [,1] [,2] [,3] [,4] [,5] [,6]
  [1,]    1    2    3    4    5    6
  [2,]    7    8    9   10   11   12
  [3,]   13   14   15   16   17   18
  [4,]   19   20   21   22   23   24
  [5,]   25   26   27   28   29   30
  [6,]   31   32   33   34   35   36
  > M \% * \% t(M)
       [,1] [,2] [,3] [,4] [,5] [,6]
  [1,] 2166 2262 2358 2454 2550 2646
  [2,] 2262 2364 2466 2568 2670 2772
  [3,] 2358 2466 2574 2682 2790 2898
  [4,] 2454 2568 2682 2796 2910 3024
  [5,] 2550 2670 2790 2910 3030 3150
  [6,] 2646 2772 2898 3024 3150 3276
\end{lstlisting}
  \end{itemize}

\end{enumerate}

\subsubsection{Exercice 10}

On fait :
\begin{lstlisting}[language=html]
> v <- c(95, 189, 68, 169, 85, 179, 72, 167, 55, 171, 86, 178, 115, 179)
> length(v)
[1] 14
> M = matrix(v, ncol = 7)
> M
     [,1] [,2] [,3] [,4] [,5] [,6] [,7]
[1,]   95   68   85   72   55   86  115
[2,]  189  169  179  167  171  178  179
> dimnames(M) = list(c("Poids", "Taille"), c("John", "Lilly", "Stef", "Bob",
+                                            "Anna", "Marik", "Boris"))
> M
       John Lilly Stef Bob Anna Marik Boris
Poids    95    68   85  72   55    86   115
Taille  189   169  179 167  171   178   179
\end{lstlisting}


\subsubsection{Exercice 11}

\begin{enumerate}
  \item 

  \begin{itemize}
    \item On fait :
\begin{lstlisting}[language=html]
    > v <- c(-2, 1, -2, -1, 1, 2, 1, -3, -3, 1, 1, 1, -2, -1, -1, 1)
    > A = matrix(v, ncol = 4)
    > A
          [,1] [,2] [,3] [,4]
    [1,]   -2    1   -3   -2
    [2,]    1    2    1   -1
    [3,]   -2    1    1   -1
    [4,]   -1   -3    1    1
    > det(A)
    [1] 25
\end{lstlisting}
    Comme $\textrm{det}(A) = 25 \neq 0$, A est inversible. On obtient son inverse en faisant :
\begin{lstlisting}[language=html]
    > solve(A)
          [,1]  [,2]  [,3] [,4]
    [1,]  0.08  0.48 -0.44  0.2
    [2,] -0.24 -0.44  0.32 -0.6
    [3,] -0.12  0.28  0.16  0.2
    [4,] -0.52 -1.12  0.36 -0.8
\end{lstlisting}
    \item On fait : 
\begin{lstlisting}[language=html]
    > v <- c(2, 2, -2, -1, -1, -2, 1, -3, 3, 4, 3, 1, -4, -5, -1, -1)
    > B = matrix(v, ncol = 4)
    > B
         [,1] [,2] [,3] [,4]
    [1,]    2   -1    3   -4
    [2,]    2   -2    4   -5
    [3,]   -2    1    3   -1
    [4,]   -1   -3    1   -1
    > det(B)
    [1] 4
\end{lstlisting}
    Comme $\textrm{det}(B) = 4 \neq 0$, B est inversible. On obtient son inverse en faisant :
\begin{lstlisting}[language=html]
    > solve(B)
           [,1]  [,2]  [,3] [,4]
    [1,]  -7.50  6.50 -0.50 -2.0
    [2,]   3.25 -2.75  0.25  0.5
    [3,] -10.25  8.75 -0.25 -2.5
    [4,] -12.50 10.50 -0.50 -3.0
\end{lstlisting}
  \end{itemize}

  \item 

  \begin{itemize}
    \item On fait :
\begin{lstlisting}[language=html]
    > A
         [,1] [,2] [,3] [,4]
    [1,]   -2    1   -3   -2
    [2,]    1    2    1   -1
    [3,]   -2    1    1   -1
    [4,]   -1   -3    1    1
    > t(A)
         [,1] [,2] [,3] [,4]
    [1,]   -2    1   -2   -1
    [2,]    1    2    1   -3
    [3,]   -3    1    1    1
    [4,]   -2   -1   -1    1
    > det(t(A))
    [1] 25
    > det(A)
    [1] 25
\end{lstlisting}
    D'où l'égalité :
    $$\textrm{det}(~^t A) = \textrm{det}(A)$$


    \item On fait : 
\begin{lstlisting}[language=html]
    > solve(A)
          [,1]  [,2]  [,3] [,4]
    [1,]  0.08  0.48 -0.44  0.2
    [2,] -0.24 -0.44  0.32 -0.6
    [3,] -0.12  0.28  0.16  0.2
    [4,] -0.52 -1.12  0.36 -0.8
    > t(A)
         [,1] [,2] [,3] [,4]
    [1,]   -2    1   -2   -1
    [2,]    1    2    1   -3
    [3,]   -3    1    1    1
    [4,]   -2   -1   -1    1
    > det(solve(A))
    [1] 0.04
    > 1 / det(t(A))
    [1] 0.04
\end{lstlisting}
    D'où l'égalité :

    $$\textrm{det}(A^{-1}) = 1/ \textrm{det}(A)$$

    \item On fait :
\begin{lstlisting}[language=html]
    > A
         [,1] [,2] [,3] [,4]
    [1,]   -2    1   -3   -2
    [2,]    1    2    1   -1
    [3,]   -2    1    1   -1
    [4,]   -1   -3    1    1
    > B
         [,1] [,2] [,3] [,4]
    [1,]    2   -1    3   -4
    [2,]    2   -2    4   -5
    [3,]   -2    1    3   -1
    [4,]   -1   -3    1   -1
    > det(A \% * \% B)
    [1] 100
    > det(A) * det(B)
    [1] 100
\end{lstlisting}
    D'où l'égalité :

    $$\textrm{det}(AB) = \textrm{det}(A)\textrm{det}(B)$$

  \end{itemize}

  \item 

  \begin{itemize}
    \item On fait : 
\begin{lstlisting}[language=html]
    > A
         [,1] [,2] [,3] [,4]
    [1,]   -2    1   -3   -2
    [2,]    1    2    1   -1
    [3,]   -2    1    1   -1
    [4,]   -1   -3    1    1
    > solve(A)
          [,1]  [,2]  [,3] [,4]
    [1,]  0.08  0.48 -0.44  0.2
    [2,] -0.24 -0.44  0.32 -0.6
    [3,] -0.12  0.28  0.16  0.2
    [4,] -0.52 -1.12  0.36 -0.8
    > t(A)
         [,1] [,2] [,3] [,4]
    [1,]   -2    1   -2   -1
    [2,]    1    2    1   -3
    [3,]   -3    1    1    1
    [4,]   -2   -1   -1    1
    > t(solve(A))
          [,1]  [,2]  [,3]  [,4]
    [1,]  0.08 -0.24 -0.12 -0.52
    [2,]  0.48 -0.44  0.28 -1.12
    [3,] -0.44  0.32  0.16  0.36
    [4,]  0.20 -0.60  0.20 -0.80
    > solve(t(A))
          [,1]  [,2]  [,3]  [,4]
    [1,]  0.08 -0.24 -0.12 -0.52
    [2,]  0.48 -0.44  0.28 -1.12
    [3,] -0.44  0.32  0.16  0.36
    [4,]  0.20 -0.60  0.20 -0.80
\end{lstlisting}
    D'où l'égalité :
    $$~^t (A^{-1}) = (~^t A)^{-1}$$

    \item 
\begin{lstlisting}[language=html]
    > A
         [,1] [,2] [,3] [,4]
    [1,]   -2    1   -3   -2
    [2,]    1    2    1   -1
    [3,]   -2    1    1   -1
    [4,]   -1   -3    1    1
    > t(A)
         [,1] [,2] [,3] [,4]
    [1,]   -2    1   -2   -1
    [2,]    1    2    1   -3
    [3,]   -3    1    1    1
    [4,]   -2   -1   -1    1
    > B
         [,1] [,2] [,3] [,4]
    [1,]    2   -1    3   -4
    [2,]    2   -2    4   -5
    [3,]   -2    1    3   -1
    [4,]   -1   -3    1   -1
    > t(B)
         [,1] [,2] [,3] [,4]
    [1,]    2    2   -2   -1
    [2,]   -1   -2    1   -3
    [3,]    3    4    3    1
    [4,]   -4   -5   -1   -1
    > A \% * \% B
         [,1] [,2] [,3] [,4]
    [1,]    6    3  -13    8
    [2,]    5   -1   13  -14
    [3,]   -3    4    0    3
    [4,]  -11    5  -11   17
    > t(A \% * \% B)
         [,1] [,2] [,3] [,4]
    [1,]    6    5   -3  -11
    [2,]    3   -1    4    5
    [3,]  -13   13    0  -11
    [4,]    8  -14    3   17
    > t(B) \% * \% t(A)
         [,1] [,2] [,3] [,4]
    [1,]    6    5   -3  -11
    [2,]    3   -1    4    5
    [3,]  -13   13    0  -11
    [4,]    8  -14    3   17
\end{lstlisting}
D'où l'égalité :

$$~^t (AB) = ~^t A (~^t B)$$

\item On fait :
\begin{lstlisting}[language=html]
    > A
         [,1] [,2] [,3] [,4]
    [1,]   -2    1   -3   -2
    [2,]    1    2    1   -1
    [3,]   -2    1    1   -1
    [4,]   -1   -3    1    1
    > B
        [,1] [,2] [,3] [,4]
    [1,]    2   -1    3   -4
    [2,]    2   -2    4   -5
    [3,]   -2    1    3   -1
    [4,]   -1   -3    1   -1
    > A \% * \% B
         [,1] [,2] [,3] [,4]
    [1,]    6    3  -13    8
    [2,]    5   -1   13  -14
    [3,]   -3    4    0    3
    [4,]  -11    5  -11   17
    > solve(A)
         [,1]  [,2]  [,3] [,4]
    [1,]  0.08  0.48 -0.44  0.2
    [2,] -0.24 -0.44  0.32 -0.6
    [3,] -0.12  0.28  0.16  0.2
    [4,] -0.52 -1.12  0.36 -0.8
    > solve(B)
           [,1]  [,2]  [,3] [,4]
    [1,]  -7.50  6.50 -0.50 -2.0
    [2,]   3.25 -2.75  0.25  0.5
    [3,] -10.25  8.75 -0.25 -2.5
    [4,] -12.50 10.50 -0.50 -3.0
    > solve(A \% *\% B)
          [,1]  [,2]  [,3]  [,4]
    [1,] -1.06 -4.36  4.58 -3.90
    [2,]  0.63  2.28 -2.09  1.95
    [3,] -1.59 -6.04  6.37 -5.35
    [4,] -1.90 -7.40  7.70 -6.50
    > solve(B) \% * \% solve(A)
          [,1]  [,2]  [,3]  [,4]
    [1,] -1.06 -4.36  4.58 -3.90
    [2,]  0.63  2.28 -2.09  1.95
    [3,] -1.59 -6.04  6.37 -5.35
    [4,] -1.90 -7.40  7.70 -6.50
\end{lstlisting}
D'où l'égalité :
$$(AB)^{-1} = B^{-1}A^{-1}$$
  \end{itemize}
\end{enumerate}


\subsubsection{Exercice 12}

\begin{enumerate}
  \item On fait :
\begin{lstlisting}[language=html]
  > v <- c(1, 1, 3,5, 2, 6, -2, -1, -3)
  > A = matrix(v,ncol = 3,byrow = TRUE)
  > A
       [,1] [,2] [,3]
  [1,]    1    1    3
  [2,]    5    2    6
  [3,]   -2   -1   -3
  > A \% * \% A
       [,1] [,2] [,3]
  [1,]    0    0    0
  [2,]    3    3    9
  [3,]   -1   -1   -3
  > A \% * \% A \% * \% A
       [,1] [,2] [,3]
  [1,]    0    0    0
  [2,]    0    0    0
  [3,]    0    0    0
\end{lstlisting}

  Donc $A$ est nilpotente d'ordre 3 ; $A^{3}$ est la matrice nulle.

  \item On fait :
\begin{lstlisting}[language=html]
  > A[1,]
  [1] 1 1 3
  > A[2,]
  [1] 5 2 6
  > A[3,]
  [1] -2 -1 -3
  > A[3, ] = A[1, ] + A[2, ]
  > A[3,]
  [1] 6 3 9
  > A
       [,1] [,2] [,3]
  [1,]    1    1    3
  [2,]    5    2    6
  [3,]    6    3    9
\end{lstlisting}
\end{enumerate}


\subsubsection{Exercice 13}
\textbf{Indication}\footnote{Soient deux matrices A et B qui définissent le système linéaire suivant : 
$$AX = B$$ 
Avec $X$, un vecteur d'inconnues.\newline
Le principe de résolution d'un tel système est d'effectuer les opérations suivantes : 
$$A.X = B \Leftrightarrow A^{-1}.A.X = A^{-1}.B \Leftrightarrow I.X = A^{-1}.B \Leftrightarrow X = A^{-1}.B$$
\textcolor{red}{Attention :} on part du principe que $A$ et $B$ ne sont pas une paire de matrices commutantes (c'est à dire $AB \neq BA$)} 
\begin{enumerate}
  \item 

$$\begin{pmatrix}
f(0.5) \\
\\
f(1)\\
\\
f(1.5)
\end{pmatrix} = 
\begin{pmatrix}
0.5^{2}a + 0.5b + c\\
\\
1^{2} \times a + 1 \times b + c\\
\\
1.5^{2}a + 1.5b + c
\end{pmatrix} = 
\begin{pmatrix}
0.5^{2} & 0.5 & 1\\
\\
1^{2} & 1 & 1\\
\\
1.5^{2} & 1.5 & 1
\end{pmatrix}\begin{pmatrix}
a\\
\\
b\\
\\
c
\end{pmatrix} = X \beta$$
Avec 
$$X = \begin{pmatrix}
0.5^{2} & 0.5 & 1\\
\\
1^{2} & 1 & 1\\
\\
1.5^{2} & 1.5 & 1
\end{pmatrix}
$$

Ainsi, la matrice $X$ recherchée est donnée par :
\begin{lstlisting}[language=html]
> X = matrix(c(0.5^2, 0.5, 1, 1^2, 1, 1, 1.5^2, 1.5, 1), ncol = 3, byrow = TRUE)
> X
     [,1] [,2] [,3]
[1,] 0.25  0.5    1
[2,] 1.00  1.0    1
[3,] 2.25  1.5    1
\end{lstlisting}
\item On fait :
\begin{lstlisting}[language=html]
> X
     [,1] [,2] [,3]
[1,] 0.25  0.5    1
[2,] 1.00  1.0    1
[3,] 2.25  1.5    1
> X
     [,1] [,2] [,3]
[1,] 0.25  0.5    1
[2,] 1.00  1.0    1
[3,] 2.25  1.5    1
> det(X)
[1] -0.25
\end{lstlisting}
Comme $\textrm{det}(X) \neq 0$, $X$ est inversible. L'inverse de X est donnée par :
\begin{lstlisting}[language=html]
> X
     [,1] [,2] [,3]
[1,] 0.25  0.5    1
[2,] 1.00  1.0    1
[3,] 2.25  1.5    1
> solve(X)
     [,1] [,2] [,3]
[1,]    2   -4    2
[2,]   -5    8   -3
[3,]    3   -3    1
\end{lstlisting}
\item On a : 

$$\beta = X^{-1}r \textrm{ et } r = \begin{pmatrix}
7 \\
4\\
5
\end{pmatrix}$$

On fait : 
\begin{lstlisting}[language=html]
> X
     [,1] [,2] [,3]
[1,] 0.25  0.5    1
[2,] 1.00  1.0    1
[3,] 2.25  1.5    1
> solve(X)
     [,1] [,2] [,3]
[1,]    2   -4    2
[2,]   -5    8   -3
[3,]    3   -3    1
> solve(X) \% * \% c(7, 4, 5)
     [,1]
[1,]    8
[2,]  -18
[3,]   14
\end{lstlisting}
Ainsi, on a $a = 8$, $b = ?18$ et $c = 14$.

\end{enumerate}

\subsubsection{Exercice 14}
\textbf{Indication}\footnote{Soient deux matrices A et B qui définissent le système linéaire suivant : 
$$AX = B$$ 
Avec $X$, un vecteur d'inconnues.\newline
Le principe de résolution d'un tel système est d'effectuer les opérations suivantes : 
$$A.X = B \Leftrightarrow A^{-1}.A.X = A^{-1}.B \Leftrightarrow I.X = A^{-1}.B \Leftrightarrow X = A^{-1}.B$$
\textcolor{red}{Attention :} on part du principe que $A$ et $B$ ne sont pas une paire de matrices commutantes (c'est à dire $AB \neq BA$)} 
\begin{enumerate}
  \item On fait : 
\begin{lstlisting}[language=html]
> A = matrix(0, nrow = 5, ncol = 5)
> A
     [,1] [,2] [,3] [,4] [,5]
[1,]    0    0    0    0    0
[2,]    0    0    0    0    0
[3,]    0    0    0    0    0
[4,]    0    0    0    0    0
[5,]    0    0    0    0    0
> B = abs(col(A) - row(A)) + 1
> B
     [,1] [,2] [,3] [,4] [,5]
[1,]    1    2    3    4    5
[2,]    2    1    2    3    4
[3,]    3    2    1    2    3
[4,]    4    3    2    1    2
[5,]    5    4    3    2    1
\end{lstlisting}
On fait :
\begin{lstlisting}[language=html]
> B
     [,1] [,2] [,3] [,4] [,5]
[1,]    1    2    3    4    5
[2,]    2    1    2    3    4
[3,]    3    2    1    2    3
[4,]    4    3    2    1    2
[5,]    5    4    3    2    1
> det(B)
[1] 48
\end{lstlisting}
Comme $\textrm{det}(B) \neq 0$, $B$ est inversible. L'inverse de $B$ est donnée par :
\begin{lstlisting}[language=html]
> solve(B)
              [,1]          [,2]          [,3]          [,4]          [,5]
[1,] -4.166667e-01  5.000000e-01 -8.881784e-17  3.256654e-16  8.333333e-02
[2,]  5.000000e-01 -1.000000e+00  5.000000e-01 -7.401487e-16  1.850372e-16
[3,] -1.110223e-16  5.000000e-01 -1.000000e+00  5.000000e-01  0.000000e+00
[4,]  2.775558e-17 -1.110223e-16  5.000000e-01 -1.000000e+00  5.000000e-01
[5,]  8.333333e-02  2.465190e-32 -1.110223e-16  5.000000e-01 -4.166667e-01
\end{lstlisting}
\item On considère les commandes :
\begin{lstlisting}[language=html]
> B
     [,1] [,2] [,3] [,4] [,5]
[1,]    1    2    3    4    5
[2,]    2    1    2    3    4
[3,]    3    2    1    2    3
[4,]    4    3    2    1    2
[5,]    5    4    3    2    1
> solve(B)
              [,1]          [,2]          [,3]          [,4]          [,5]
[1,] -4.166667e-01  5.000000e-01 -8.881784e-17  3.256654e-16  8.333333e-02
[2,]  5.000000e-01 -1.000000e+00  5.000000e-01 -7.401487e-16  1.850372e-16
[3,] -1.110223e-16  5.000000e-01 -1.000000e+00  5.000000e-01  0.000000e+00
[4,]  2.775558e-17 -1.110223e-16  5.000000e-01 -1.000000e+00  5.000000e-01
[5,]  8.333333e-02  2.465190e-32 -1.110223e-16  5.000000e-01 -4.166667e-01
> solve(B) \% * \% c(1, 2, 2, 3, 2)
      [,1]
[1,]  0.75
[2,] -0.50
[3,]  0.50
[4,] -1.00
[5,]  0.75
\end{lstlisting}

Ainsi, on a $a = 0.75$, $b = ?0.50$, $c = 0.50$, $d = -1.00$ et $e = 0.75$.

\end{enumerate}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\chapter{Introductions aux structures de donnés et aux fonctions avec R}
\textbf{Auteur : } \underline{\href{http://www.math.unicaen.fr/~chesneau/}{Christophe Chesneau}}\newline
\\
\textbf{Note : }\newline
L'objectif de ce document est de présenter les commandes associées aux structures de données offertes par le logiciel R..\newline
\textit{Contact :} \href{christophe.chesneau@gmail.com}{christophe.chesneau@gmail.com}\newline
Bonne lecture !
\section{Structures de données}
\subsection*{Notion de data frame}
En général, les données d'une étude statistique sont présentées sous forme matricielle. Les lignes représentent les individus observés et les colonnes les variables étudiées. Le logiciel \textbf{R}, pour ses applications les plus évoluées, travaille avec des structures de données appelées data frame.
\subsection*{Construction de data frame}
On peut créer une data frame en transformant une matrice numérique lorsque toutes les données sont numériques. On fait :
\begin{lstlisting}[language=html]
> mat = matrix(1:9, ncol = 3)
> as.data.frame(mat)
  V1 V2 V3
1  1  4  7
2  2  5  8
3  3  6  9
\end{lstlisting}
On peut aussi créer une data frame en concaténant des objets de différentes natures. On fait :
\begin{lstlisting}[language=html]
> age = c(24, 26, 22)
> sexe = c("H", "H", "F")
> love = c(TRUE, FALSE, TRUE)
> enquete = data.frame(age, sexe, love)
> enquete
  age sexe  love
1  24    H  TRUE
2  26    H FALSE
3  22    F  TRUE
\end{lstlisting}
\subsection*{Désigner des facteurs}
On peut souhaiter que certaines colonnes soient considérées comme des facteurs à plusieurs niveaux (ou à plusieurs modalités). Dans ce cas, on fait :
\begin{lstlisting}[language=html]
> sexe = factor(c("H", "H", "F"))
\end{lstlisting}
Pour connaître les niveaux de ce facteur, on fait :
\begin{lstlisting}[language=html]
> levels(sexe)
[1] "F" "H"
\end{lstlisting}
Cela renvoie : \textit{[1] "F" "H"}. L'ordre ici est lexicographique.
\subsection*{Attribuer des labels aux colonnes}
On peut mettre des labels aux colonnes comme pour une liste :
\begin{lstlisting}[language=html]
names(enquete) = c("Age", "Sexe", "Love")
\end{lstlisting}
Par défaut, le logiciel \textbf{R} met comme nom, le nom de l'objet qui est dans la data frame. Éventuellement, on peut mettre des labels aux lignes en faisant :
\begin{lstlisting}[language=html]
row.names(enquete) = c("Jules", "Jim", "Elsa")
> enquete
      Age Sexe  Love
Jules  24    H  TRUE
Jim    26    H FALSE
Elsa   22    F  TRUE
\end{lstlisting}
On aurait aussi pu faire :
\begin{lstlisting}[language=html]
> enquete = data.frame(Age = c(24, 26, 22), Sexe = c("H", "H", "F"),Love = c(TRUE, FALSE, TRUE))
> enquete
  Age Sexe  Love
1  24    H  TRUE
2  26    H FALSE
3  22    F  TRUE
\end{lstlisting}
Une data frame peut, comme une liste, contenir d'autres listes, matrices, vecteurs \dots On peut aussi transformer une data frame en matrice par la commande \textit{as.matrix}. \textcolor{red}{Ceci est même conseillé pour faire des opérations arithmétiques}.
\subsection*{Travailler avec une data.frame}
On fait :
\begin{lstlisting}[language=html]
> str(enquete)
'data.frame': 3 obs. of  3 variables:
 $ Age : num  24 26 22
 $ Sexe: Factor w/ 2 levels "F","H": 2 2 1
 $ Love: logi  TRUE FALSE TRUE
\end{lstlisting}
On obtient ainsi une brève description des variables de enquete.\newline
\textcolor{red}{On peut travailler sur une data frame comme sur une matrice.}\newline
On considère les commandes :
\begin{lstlisting}[language=html]
> enquete[1:2, 2:3]
      Sexe  Love
Jules    H  TRUE
Jim      H FALSE
\end{lstlisting}
On a ainsi extrait une une sous-data frame contenant les 1-ère et 2-ème lignes et 2$^{\textrm{ème}}$ et 3$^{\textrm{ème}}$ colonnes de la data frame enquete.\newline
\\
On considère les commandes :
\begin{lstlisting}[language=html]
> summary(enquete)
      Age     Sexe     Love        
 Min.   :22   F:1   Mode :logical  
 1st Qu.:23   H:2   FALSE:1        
 Median :24         TRUE :2        
 Mean   :24         NA's :0        
 3rd Qu.:25                        
 Max.   :26 
\end{lstlisting}
On obtient alors plusieurs paramètres statistiques des variables considérées.\newline
\\
Une variable peut être appelée en faisant :
\begin{lstlisting}[language=html]
> enquete$Age
[1] 24 26 22
\end{lstlisting}
On associe les labels aux colonnes d'une data frame en faisant :
\begin{lstlisting}[language=html]
attach(enquete)
\end{lstlisting}
On peut alors appeler directement les variables par leur nom :
\begin{lstlisting}[language=html]
> Age
[1] 24 26 22
\end{lstlisting}
On détache les labels des colonnes en faisant :
\begin{lstlisting}[language=html]
detach(enquete)
\end{lstlisting}
\subsection*{Construction de tableaux de contingence avec une data frame}
Dans la data frame enquete, les variables \textit{Sexe} et \textit{Love} sont considérées comme des facteurs. On considère alors les commandes :
\begin{lstlisting}[language=html]
> attach(enquete)
> table(Sexe)
Sexe
F H 
1 2 
\end{lstlisting}
On obtient ainsi les effectifs de l'échantillon pour chaque modalité du facteur \textit{Sexe}.\newline
On fait :
\begin{lstlisting}[language=html]
> table(Sexe, Love)
    Love
Sexe FALSE TRUE
   F     0    1
   H     1    1
\end{lstlisting}
On obtient ainsi les effectifs de l'échantillon pour chaque couple de modalités.
\subsection*{Exemple : data frame "Basse-Normandie"}
\begin{lstlisting}[language=html]
> région = c("Calvados", "manche", "Orne");région
[1] "Calvados" "manche"   "Orne"    
> pop = c(664000, 489500, 292337);pop
[1] 664000 489500 292337
> superficie = c(5548, 5938, 6103);superficie
[1] 5548 5938 6103
> basnor = data.frame(région,pop,superficie)
> basnor
    région    pop superficie
1 Calvados 664000       5548
2   manche 489500       5938
3     Orne 292337       6103
> str(basnor)
'data.frame': 3 obs. of  3 variables:
 $ région    : Factor w/ 3 levels "Calvados","manche",..: 1 2 3
 $ pop       : num  664000 489500 292337
 $ superficie: num  5548 5938 6103
> basnor$région
[1] Calvados manche   Orne    
Levels: Calvados manche Orne
> basnor$superficie
[1] 5548 5938 6103
> class(basnor$région)
[1] "factor"
> class(basnor$superficie)
[1] "numeric"
> basnor$superficie[1]
[1] 5548
> basnor$région[2]
[1] manche
Levels: Calvados manche Orne
> basnor[1]
    région
1 Calvados
2   manche
3     Orne
> class(basnor[1])
[1] "data.frame"
> length(basnor[1])
[1] 1
> basnor[[1]]
[1] Calvados manche   Orne    
Levels: Calvados manche Orne
> basnor[1,2]
[1] 664000
> basnor[3,1]
[1] Orne
Levels: Calvados manche Orne
> basnor[2:3,1:2]
  région    pop
2 manche 489500
3   Orne 292337
> basnor[2:3, ]
  région    pop superficie
2 manche 489500       5938
3   Orne 292337       6103
> basnor[, 2:3]
     pop superficie
1 664000       5548
2 489500       5938
3 292337       6103
> basnor[basnor$superficie < 6000, ]
    région    pop superficie
1 Calvados 664000       5548
2   manche 489500       5938
> basnor[basnor$superficie < 6000, c("région", "superficie")]
    région superficie
1 Calvados       5548
2   manche       5938
\end{lstlisting}
Pour éviter de répéter "basnor", on aurait pu attacher la data frame :
\begin{lstlisting}[language=html]
> attach(basnor)
The following objects are masked _by_ .GlobalEnv:

    pop, région, superficie

> région
[1] "Calvados" "manche"   "Orne"    
> basnor[superficie < 6000, c("région", "superficie")]
    région superficie
1 Calvados       5548
2   manche       5938
> mean(superficie)
[1] 5863
> var(superficie)
[1] 81225
\end{lstlisting}

\section{Lire des données}
Considérons des données présentées dans un fichier texte intitulé \textit{donnees.txt}, lequel se trouve dans un dossier de travail intitulé TP. Dans un premier temps, on dirige le logiciel R vers le dossier TP avec la commande \textit{setwd}. Voici un exemple :
\begin{lstlisting}[language=html]
setwd("[...]/StatDesR/TP")
\end{lstlisting}
Si les données sont présentées sous la forme d'un vecteur, alors on fait :
\begin{lstlisting}[language=html]
donnees = scan("donnees.txt")
\end{lstlisting}
Si les données sont présentées sous forme matricielle avec en colonnes les variables et en lignes les individus, alors on fait :
\begin{lstlisting}[language=html]
donnees = read.table("donnees.txt")
\end{lstlisting}
On obtient alors une data frame. Les colonnes qui sont numériques restent numériques tandis que les colonnes qui sont constituées de chaînes de caractères sont transformées en facteurs.\newline
Si le fichier texte comprend un label au-dessus de chaque colonne, on fait :
\begin{lstlisting}[language=html]
donnees = read.table("donnees.txt", header = T)
\end{lstlisting}
Ainsi, les colonnes auront le nom adéquat.\newline
On peut aussi lire un fichier de données en ligne sur internet :
\begin{lstlisting}[language=html]
donnees = read.table("http://www.math.unicaen.fr/~chesneau/donnees.txt",header = T)
\end{lstlisting}
On peut aussi lire un fichier de données disponible dans R :
\begin{lstlisting}[language=html]
donnees = data(airquality)
\end{lstlisting}
\textcolor{red}{Les commandes scan et read.table s'adaptent à toutes les mises en forme des données grâce à de nombreuses options de lecture (sep, dec, skip\dots). Voir : \textit{help("scan")} et \textit{help("read.table")}.}
\section{Valeurs manquantes}
L'absence de données est indiquée par \textit{NULL}. Une valeur manquante est indiquée par \textit{NA} (pour \textbf{N}ot \textbf{A}vailable). On fait :
\begin{lstlisting}[language=html]
> u = c(31, 43, NA, 36, NA)
> is.na(u)
[1] FALSE FALSE  TRUE FALSE  TRUE
\end{lstlisting}
Les valeurs manquantes sont alors précisées par des \textit{TRUE}.\newline
On considère les commandes :
\begin{lstlisting}[language=html]
> mean(u, na.rm = TRUE)
[1] 36.66667
\end{lstlisting}
On a ainsi fait la moyenne des valeurs des éléments \textit{u} en ignorant les valeurs manquantes.\newline
Si le fichier texte donnees contient des données manquantes, on ignore les individus correspondants en utilisant la commande \textit{na.strings} :
\begin{lstlisting}[language=html]
donnees = read.table("donnees.txt", header = T, na.strings = "NA")
\end{lstlisting}
Autrement, on peut identifier les lignes présentant des données manquantes en faisant :
\begin{lstlisting}[language=html]
donnees[!complete.cases(donnees), ]
\end{lstlisting}
On peut également créer un nouveau jeu de données sans valeur manquante en faisant :
\begin{lstlisting}[language=html]
donnees2 = na.omit(donnees)
\end{lstlisting}
\section{Les outils pour créer des fonctions}
\textcolor{red}{Dorénavant, les commandes étant nombreuses et liées, il est préférable de les écrire dans un fichier texte, puis copier-coller celles-ci dans la fenêtre "R Console".}
\subsection*{Les instructions conditionnelles}
\begin{itemize}
  \item La syntaxe de la commande \textit{if} est :
\begin{center}
if ( \textit{condition} ) $\{$ \textit{instruction1} $\}$ else $\{$ \textit{instruction2} $\}$
\end{center}
Notons que \textit{condition} qui peut valoir TRUE ou FALSE.\newline
Si on a seulement :
\begin{center}
if ( \textit{condition} ) $\{$ \textit{instruction1} $\}$ 
\end{center}
Alors \textit{instruction1} est exécuté si \textit{condition} vaut TRUE et il ne se passe rien si \textit{condition} vaut FALSE.\newline
Voir aussi la commande \textit{ifelse} qui s'applique à un vecteur logique.\newline
On fait : 
\begin{lstlisting}[language=html]
> a = numeric()
> vec = c(1, 3, 2, 4, 7, 5, 6, 9, 8)
> if (mean(vec) > 6) { a = 1:9 } else { a = rev(1:9) }
> a
[1] 9 8 7 6 5 4 3 2 1
\end{lstlisting}
\item La syntaxe de \textit{for} est : 
\begin{center}
for (\textit{variable} in \textit{vecteur}) $\{$ \textit{instruction} $\}$
\end{center}
avec \textit{instruction} dépendant de la variable.\newline
On considère les commandes :
\begin{lstlisting}[language=html]
> b = numeric()
> for(i in 1:8) { b[i] = vec[i] + vec[i + 1] }
> b
[1]  4  5  6 11 12 11 15 1
\end{lstlisting}
\item La syntaxe de la commande \textit{while} est :
\begin{center}
while ( \textit{condition} ) $\{$ \textit{instruction} $\}$.
\end{center}
On fait :
\begin{lstlisting}[language=html]
> while (mean(vec) < 10) { vec = vec + 1 }
> vec
[1]  6  8  7  9 12 10 11 14 13
\end{lstlisting}
\item La syntaxe de la commande \textit{repeat} est :
\begin{center}
repeat $\{$ \textit{instruction} $\}$
\end{center}
L'\textit{instruction} est répétée tant que la commande \textit{break} n'est pas exécutée.\newline
On fait :
\begin{lstlisting}[language=html]
> t = 1
> repeat { t = 3 * t + 1
+ if (t >= 15.3) break
+ }
> t
[1] 40
\end{lstlisting}
\item Voir aussi la commande \textit{next} qui oblige à passer à la boucle suivante.
\end{itemize}
\subsection*{Construire ses propres fonctions}
\subsubsection*{Syntaxe de la commande function.}
Si on veut, par exemple, construire la fonction \textit{newfonction} qui s'applique à $2$ arguments \textit{arg1} et \textit{arg2}, la syntaxe de la commande function est :
\begin{center}
\textit{newfonction} = \textbf{function} (\textit{arg1}, \textit{arg2}) $\{$ \textit{instruction} $\}$
\end{center}
Ensuite on fait : \textit{newfonction}(\textit{val1}, \textit{val2}).\newline
\\
On considère les commandes :
\begin{lstlisting}[language=html]
arrangement = function(n, k) { factorial(n) / factorial(n - k) }
\end{lstlisting}
Ensuite on fait :
\begin{lstlisting}[language=html]
> arrangement(7, 3)
[1] 210
\end{lstlisting}
On a ainsi calculer l'arrangement :
$$ A_{n}^{k} = \frac{n!}{(n-k)!}$$ 
Avec $n = 7$ et $k = 3$.\newline
\\
On fait :
\begin{lstlisting}[language=html]
courbe = function(x) { sqrt(x + exp(x)) }
\end{lstlisting}
Ensuite on fait :
\begin{lstlisting}[language=html]
> courbe(1)
[1] 1.928285
\end{lstlisting}
On a ainsi calculer la valeur de la fontion :
$$f(x) = \sqrt{x + e^{x}} \textrm{ et } x = 1$$
\subsubsection*{Exemple avancé : fonction moyennemat.}
\begin{enumerate}
  \item On construit une fonction \underline{moyennemat} qui dépend d'un argument $x$ qui sera une matrice.
  \item On ouvre une accolade.
  \item On initialise un objet $a$ qui sera un vecteur numérique.
  \item On déclare un objet \textit{nbcol} qui sera le nombre de colonnes de la matrice ; cet objet aura pour valeur la deuxième dimension de la matrice.
  \item On fait un boucle qui part du numéro de la première colonne jusqu'au dernier numéro \textit{nbcol} ; pour un numéro $i$, on affecte à $a[i]$ la valeur de la moyenne de la colonne numéro $i$.
  \item On retourne l'objet $a$ qui est un vecteur.
  \item On ferme la fonction avec une accolade.
\end{enumerate}
Ceci donne :
\begin{lstlisting}[language=html]
moyennemat = function(x) {
  a = numeric()
  nbcol = dim(x)[2]
  for (i in 1:nbcol) { 
    a[i] = mean(x[,i])
  }
  return(a)
}
\end{lstlisting}
On fait :
\begin{lstlisting}[language=html]
> mat = matrix(1:9, ncol = 3);mat
     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9
> sum(mat[,1])/nrow(mat) # moyenne de la colonne 1
[1] 2
> sum(mat[,2])/nrow(mat) # moyenne de la colonne 2
[1] 5
> sum(mat[,3])/nrow(mat) # moyenne de la colonne 3
[1] 8
> moyennemat(mat) # On applique la fonction pour vérifier
[1] 2 5 8
\end{lstlisting}
Ainsi, la fonction \underline{moyennemat} construit un vecteur de longueur égale au nombre de colonnes de la
matrice et dont les éléments seront les moyennes de colonnes.
\subsubsection*{Exemple avancé : fonction compter.}
\begin{enumerate}
  \item On construit une fonction compter qui dépend de 2 arguments $a$ et $b$.
  \item On ouvre une accolade.
  \item On initialise un vecteur $d$ numérique.
  \item On fait une boucle qui part de $1$ jusqu'au nombre qui mesure la \textit{longueur de $a$}.\newline
  Dans cette boucle, on affecte au $i^{\textrm{ème}}$ élément de $d$ la valeur calculée ainsi : on construit un vecteur logique de même longueur que $b$ et dont le $j^{\textrm{ème}}$ élément vaudra \textit{TRUE} s'il est égale à $a[i]$ et \textit{FALSE} sinon. On applique la fonction sum à ce vecteur logique. Le résultat sera le nombre de \textit{TRUE} dans ce vecteur logique.
  \item On donne un nom aux éléments du vecteur $d$.
  \item On retourne le vecteur $d$.
  \item On ferme la fonction avec une accolade.
\end{enumerate}
Ceci donne :
\begin{lstlisting}[language=html]
compter = function(a, b) {
  d = numeric()
  for(i in 1:length(a)) { 
    d[i] = sum(b == a[i]) 
  }
  names(d) = as.character(a)
  return(d)
}
\end{lstlisting}
On fait :
\begin{lstlisting}[language=html]
> couleur = c("rose", "vert", "jaune");couleur
[1] "rose"  "vert"  "jaune"
> fleurs = c("rose", "rose", "vert", "rose", "rose", "jaune", "jaune");fleurs
[1] "rose"  "rose"  "vert"  "rose"  "rose"  "jaune" "jaune"
> compter(couleur, fleurs)
 rose  vert jaune 
    4     1     2 
\end{lstlisting}

Ainsi, la fonction compter donne le nombre de fois où les éléments d'un vecteur apparaissent dans
un autre vecteur.

\subsection*{Fonctions s'appliquant à des objets plus complexes}
\subsubsection*{Application d'une fonction aux lignes ou colonnes d'une matrice.}
On fait :
\begin{lstlisting}[language=html]
> mat = matrix(1:9, ncol = 3);mat
     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9
> apply(mat, 1, mean)
[1] 4 5 6
> apply(mat, 1, max)
[1] 7 8 9
> apply(mat, 1, min)
[1] 1 2 3
\end{lstlisting}
On a alors un vecteur de longueur le nombre de lignes de mat et dont les élémens sont ici les moyennes (puis éléments maximum et minimum) des \underline{lignes} (1).\newline
On considère les commandes :
\begin{lstlisting}[language=html]
> mat = matrix(1:9, ncol = 3);mat
     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9
> apply(mat, 2, mean)
[1] 2 5 8
> apply(mat, 2, max)
[1] 3 6 9
> apply(mat, 2, min)
[1] 1 4 7
\end{lstlisting}
Ainsi, on obtient un vecteur de longueur le nombre de colonnes de mat et dont les éléments sont ici les moyennes (puis éléments maximum et minimum) des \underline{colonnes} (2).\newline
\\
On peut remplacer \textit{mean} par n'importe quelle fonction de \textbf{R} prédéterminée ou construite, qui s'applique à un vecteur.\newline
Par exemple, on fait :
\begin{lstlisting}[language=html]
> mat = matrix(1:9, ncol = 3);mat
     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9
> mat[1,] # Première ligne
[1] 1 4 7
> (mat[1,] > 5)
[1] FALSE FALSE  TRUE
> mat[2,] # Seconde ligne
[1] 2 5 8
> (mat[2,] > 5)
[1] FALSE FALSE  TRUE
> mat[3,] # Troisième ligne
[1] 3 6 9
> (mat[3,] > 5)
[1] FALSE  TRUE  TRUE
> apply(mat, 1, function(x) { sum(x > 5)} )
[1] 1 1 2
\end{lstlisting}
On obtient ainsi un vecteur de longueur le nombre de lignes de \textit{mat} dont la valeur des éléments est le nombre d'éléments de la ligne correspondante ayant des valeurs strictement supérieures à 5.

\subsubsection*{Application d'une fonction aux éléments d'une liste.}
On considère les commandes :
\begin{lstlisting}[language=html]
> liste = list(c(1, 2), c(3, 1, 2));liste
[[1]]
[1] 1 2

[[2]]
[1] 3 1 2

> sapply(liste, mean)
[1] 1.5 2.0
\end{lstlisting}
On a ainsi un vecteur de longueur le nombre d'éléments de \textit{liste} et dont la valeur de chaque élément est ici la moyenne de chaque élément de \textit{liste}.\newline
\\
On considère les commandes :
\begin{lstlisting}[language=html]
> liste = list(c(1, 2), c(3, 1, 2));liste
[[1]]
[1] 1 2

[[2]]
[1] 3 1 2

> lapply(liste, sd)
[[1]]
[1] 0.7071068

[[2]]
[1] 1
\end{lstlisting}
On obtient ainsi une liste ayant le même nombre d'éléments que \textit{liste} et dont la valeur de chaque élément est ici le résultat de l'application de la fonction \textit{sd} aux éléments de liste (écart-type).
\subsubsection*{Application d'une fonction aux éléments d'une data.frame.}
On fait :
\begin{lstlisting}[language=html]
> Age = c(24, 26, 22);Age
[1] 24 26 22
> Sexe = c("H", "H", "F");Sexe
[1] "H" "H" "F"
> Love = c(TRUE, FALSE, TRUE);Love
[1]  TRUE FALSE  TRUE
> tapply(Age, Sexe, mean)
 F  H 
22 25 
\end{lstlisting}
On obtient ainsi un vecteur constitué de la moyenne des âges pour chaque modalité \textit{F}, \textit{H} de la variable \textit{Sexe}.\newline
On peut remplacer mean par n'importe quelle fonction de R prédéterminée ou construite, qui s'applique à un vecteur.
\subsubsection*{Fonction qui construit une liste.}
On considère les commandes :
\begin{lstlisting}[language=html]
> split(Age, Sexe)
$F
[1] 22

$H
[1] 24 26
\end{lstlisting}
On a ainsi construit une liste à partir de deux arguments, le premier étant un vecteur et le second un facteur. Les éléments de la liste sont les niveaux du facteur. Chaque élément contient un vecteur dont les valeurs correspondent aux valeurs du vecteur passé comme premier argument ayant le niveau de l'élément considéré.
\section{Exercices}
\subsection{Enoncés}
\subsubsection*{Exercice 1}
Créer, avec la commande adéquate, le vecteur numérique $x$ dont les éléments sont les valeurs disponibles ici :
\begin{center}
http://www.math.unicaen.fr/$\sim$Echesneau/norm.txt
\end{center}
Préciser les paramètres statistiques élémentaires associés à $x$.
\subsubsection*{Exercice 2}
On considère la matrice :
$$M = 
\begin{pmatrix} 
2 & 4 & 8 \\
2 & 5 & 9 \\
2 & 3 & 8 \\
1 & 4 & 7 \\
1 & 5 & 1 \\
1 & 2 & 3
\end{pmatrix}
$$
\begin{enumerate}
  \item Créer la matrice $M$ dans \textbf{R}.
  \item Créer une nouvelle matrice \textit{mat} obtenu en ajoutant une nouvelle colonne à $M$ d'éléments : $8; 7; 1; 2; 1; 2$.
  \item Transformer votre matrice en data frame.
  \item Attribuer aux colonnes les noms : \textit{cas, mois, semaine, valeur} et aux lignes, les 6 premières lettres de l'alphabet.
  \item Extraire la $2^{\textrm{ème}}$, $4^{\textrm{ème}}$ et $6^{\textrm{ème}}$ lignes de \textit{mat}.
  \item Ordonner les lignes de \textit{mat} suivant les valeurs des éléments de valeur.
\end{enumerate}
\subsubsection*{Exercice 3}
On travaille avec le jeu de données \textit{airquality}, disponible dans \textbf{R}.
\begin{enumerate}
  \item Charger les données et comprendre d'où elles émanent.
  \item Afficher les noms des variables considérées.
  \item Afficher le nombre de lignes et de colonnes.
  \item Calculer les paramètres statistiques de base à l'aide de la commande \textit{summary}.
  \item Calculer la variance et l'écart-type pour les valeurs de la variable \textit{Temp}.
  \item Extraire du jeu de données :
  \begin{enumerate}
    \item la $2^{\textrm{ème}}$ ligne.
    \item la $3^{\textrm{ème}}$ colonne.
    \item les lignes 1, 2 et 4 avec une seule commande \textit{c()}.
    \item les lignes 3 à 6 avec la commande.
    \item tout sauf les colonnes 1 et 2.
    \item toutes les lignes ayant une température supérieure à 90.
  \end{enumerate}
  \item Insérer une nouvelle variable \textit{TooWindy} dans le jeu de données airquality qui affiche TRUE pour chaque valeur de \textit{Wind} supérieure à 10, et FALSE sinon. Puis supprimer cette nouvelle variable.
  \item Créer un nouveau jeu de données correspondant à \textit{airquality} privée des lignes de \textit{Ozone} contenant des valeurs manquantes.
  \item Installer le package \textit{ggplot2}. Reproduire et analyser les commandes suivantes :
  \begin{lstlisting}[language=html]
    library(ggplot2)
    qplot(Temp, Ozone, data = airquality, colour = Month)
  \end{lstlisting}
\end{enumerate}
\subsubsection*{Exercice 4}
Le fichier \textit{donneesconsommation.txt} contient 300 résultats bruts d'une enquête sur la consommation des ménages en 1995 dont le résumé se trouve dans le document de l'INSEE "Enquête sur la consommation des ménages en 1995". Pour simplifier le territoire a été divisé en 3 grandes régions (GR1, GR2 et GR3) correspondant au regroupement de plusieurs Z.E.A.T. (Zones d'Étude et d'Aménagement du Territoire) suivant la nomenclature de l'INSEE :
\begin{itemize}
  \item GR1 : Région parisienne, Bassin parisien,
  \item GR2 : Nord, Ouest, Sud-Ouest,
  \item GR3 : Est, Centre Est, Méditerranée.
\end{itemize}
On a déterminé par ailleurs deux catégories de ménage TA1 et TA2 :
\begin{itemize}
  \item TA1 : ménage dont la personne de référence a un âge inférieur à 55 ans.
  \item TA2 : ménage dont la personne de référence a un âge supérieur ou égal à 55 ans.
\end{itemize}
Dans chacune des 3 grandes régions, on a interrogé 50 ménages appartenant à TA1 et 50 ménages appartenant à TA2. À chaque ligne du fichier correspond un ménage.
\begin{itemize}
  \item 1-ère colonne : Age = TA1 ou TA2 (tranche d'âge),
  \item 2-ème colonne : Region = GR1, GR2 ou GR3 (grande région),
  \item 3-ème colonne : Revenu = revenu annuel du ménage (en euros),
  \item 4-ème colonne : Loisirs = dépense annuelle en loisirs (en euros),
  \item 5-ème colonne : Pates = dépense annuelle en pâtes alimentaires (en euros),
  \item 6-ème colonne : Cafe = AC, BC ou MC marque de café préférée du ménage (BC = "Bon café", MC = "Mon café", AC= "Autre café"),
  \item 7-ème colonne : Enfants = 0,1,2,. . .= nombre d'enfants de la personne de référence du ménage (mais ne vivant pas obligatoirement avec les ressources du ménage),
  \item 8-ème colonne : Magnetoscope = 0,1 (0 si le ménage ne possède pas de magnétoscope, 1 sinon),
  \item 9-ème colonne : Lavevaisselle = 0,1 (0 si le ménage ne possède pas de lave-vaisselle 1 sinon).
\end{itemize}
\begin{enumerate}
  \item Construire une data frame \textit{conso.dat} en faisant :
\begin{lstlisting}[language=html]
conso.dat = read.table("http://www.math.unicaen.fr/~chesneau/
donneesconsommation.txt", header = T)
\end{lstlisting}
  \item Reproduire et commenter les commandes suivantes :
  \begin{lstlisting}[language=html]
    attach(conso.dat)
    str(conso.dat)
    summary(conso.dat)
  \end{lstlisting}
    \item Extraire les données des individus dont la marque de café préférée est AC et ayant un revenu annuel inférieur à 15000 euros.
  \item Extraire les données des individus ayant plus de 3 enfants, une dépense annuelle en pâtes alimentaires supérieure à 60 euros et un revenu annuel inférieur à 20000 euros.
\end{enumerate}

\subsubsection*{Exercice 5}
Créer dans R la fonction $f : \mathbb{R}^{n} \times \mathbb{R}^{n}$ définie par :
$$f(m,n)=\sum_{k=1}^{n} k^{m}$$


\subsubsection*{Exercice 6}
Créer dans R la fonction $f : \mathbb{R}^{n} \times \mathbb{R}^{n}$ définie par :
$$f(x_{1},\dots,x_{n}) = \left(x_{1},\frac{x_{2}^{2}}{2},\dots,\frac{x_{n}^{n}}{n}\right)$$

\subsubsection*{Exercice 7}
Créer dans R la fonction $f : \mathbb{R}^{n} \times \mathbb{R}^{n-2}$ définie par :
$$f(x_{1},\dots,x_{n}) = \left(\frac{x_{1}+x_{2}+x_{3}}{3},\frac{x_{2}+x_{3}+x_{4}}{3},\dots,\frac{x_{n-2}+x_{n-1}+x_{n}}{3}\right)$$

\subsubsection*{Exercice 8}
Créer dans R la fonction $f : \mathbb{R} \times [0;\infty[$ définie par :
$$f(x) = \left\{
  \begin{array}{rl}
   \frac{1}{10}e^{-\frac{x}{10}} & \textrm{ si } x \leq 0 \\
    0 & \textrm{sinon}
  \end{array}
\right.
$$

\subsubsection*{Exercice 9}
Créer dans R la fonction $f : \mathbb{N}^{2} \times [0;1] \rightarrow [0; 1]$ définie par :
$$f(k,n,p) = \binom{n}{k}p^{k}(1-p)^{n-k}$$
\subsubsection*{Exercice 10}
Créer dans R la fonction $f : \mathbb{N} \times [0;\infty[ \rightarrow [0; 1]$ définie par :
$$f(k,\lambda) = e^{-\lambda}\frac{\lambda^{k}}{k!}$$
\subsubsection*{Exercice 11}
On considère la suite de réel $(u_{n})_{n\in \mathbb{N}}$ telle que $u_{0} = 0.5$ et, pour tout $n \geq 1$,
$$u_{n} = 1 + 0.25 \cdot u_{n-1}^{2}$$
Construire une fonction Loop d?argument $m$ qui retourne un vecteur contenant les $m$ premières valeurs de la suite : $u_{1}, u_{2}, \dots , u_{m}.$ Utiliser cette fonction pour appuyer le fait que  $(u_{n})_{n\in \mathbb{N}}$ converge vers 2.


\subsection{Solutions}
\subsubsection*{Exercice 1}
\begin{lstlisting}[language=html]
On fait :
\begin{description}
> x = scan("http://www.math.unicaen.fr/~chesneau/norm.txt")
Read 500 items
> head(x, 10)
 [1]  1.3409620 -0.3851693  0.1937503  0.3396655 -0.1033311  0.7039116
 [7]  1.6668049  0.6790097  0.2294325 -0.5517535
> summary(x)
    Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
-3.19300 -0.59960  0.03010  0.03493  0.74610  3.02300 
\end{lstlisting}

\subsubsection*{Exercice 2}
\begin{enumerate}
  \item \textcolor{white}{.}\newline
\begin{lstlisting}[language=html]
  > vec <- c(2, 2, 2, 1, 1, 1, 4, 5, 3, 4, 5, 2, 8, 9, 8, 7, 1, 3)
  > vec
 [1] 2 2 2 1 1 1 4 5 3 4 5 2 8 9 8 7 1 3
  > M = matrix(vec,ncol = 3);M
     [,1] [,2] [,3]
[1,]    2    4    8
[2,]    2    5    9
[3,]    2    3    8
[4,]    1    4    7
[5,]    1    5    1
[6,]    1    2    3
\end{lstlisting}
\item \textcolor{white}{.}\newline
\begin{lstlisting}[language=html]
  > mat = cbind(M,c(8, 7, 1, 2, 1, 2));mat
     [,1] [,2] [,3] [,4]
[1,]    2    4    8    8
[2,]    2    5    9    7
[3,]    2    3    8    1
[4,]    1    4    7    2
[5,]    1    5    1    1
[6,]    1    2    3    2
\end{lstlisting}
\item \textcolor{white}{.}\newline
\begin{lstlisting}[language=html]
> mat = as.data.frame(mat)
> mat
  V1 V2 V3 V4
1  2  4  8  8
2  2  5  9  7
3  2  3  8  1
4  1  4  7  2
5  1  5  1  1
6  1  2  3  2
\end{lstlisting}
\item \textcolor{white}{.}\newline
\begin{lstlisting}[language=html]
> colnames(mat) = c("cas", "mois", "semaine", "valeur")
> mat
  cas mois semaine valeur
1   2    4       8      8
2   2    5       9      7
3   2    3       8      1
4   1    4       7      2
5   1    5       1      1
6   1    2       3      2
> rownames(mat) = letters[1:6]
> mat
  cas mois semaine valeur
a   2    4       8      8
b   2    5       9      7
c   2    3       8      1
d   1    4       7      2
e   1    5       1      1
f   1    2       3      2
\end{lstlisting}
\item \textcolor{white}{.}\newline
\begin{lstlisting}[language=html]
> matBis <- mat[c(2, 4, 6), ]
> matBis
  cas mois semaine valeur
b   2    5       9      7
d   1    4       7      2
f   1    2       3      2
\end{lstlisting}
\item \textcolor{white}{.}\newline
\begin{lstlisting}[language=html]
> mat
  cas mois semaine valeur
a   2    4       8      8
b   2    5       9      7
c   2    3       8      1
d   1    4       7      2
e   1    5       1      1
f   1    2       3      2
> mat = mat[order(mat$valeur), ]
> mat
  cas mois semaine valeur
c   2    3       8      1
e   1    5       1      1
d   1    4       7      2
f   1    2       3      2
b   2    5       9      7
a   2    4       8      8
\end{lstlisting}
\end{enumerate}

\subsubsection*{Exercice 3}

\begin{enumerate}
  \item \textcolor{white}{.}\newline
\begin{lstlisting}[language=html]
  > data(airquality)
> ?airquality
> str(airquality)
'data.frame': 153 obs. of  6 variables:
 $ Ozone  : int  41 36 12 18 NA 28 23 19 8 NA ...
 $ Solar.R: int  190 118 149 313 NA NA 299 99 19 194 ...
 $ Wind   : num  7.4 8 12.6 11.5 14.3 14.9 8.6 13.8 20.1 8.6 ...
 $ Temp   : int  67 72 74 62 56 66 65 59 61 69 ...
 $ Month  : int  5 5 5 5 5 5 5 5 5 5 ...
 $ Day    : int  1 2 3 4 5 6 7 8 9 10 ...
\end{lstlisting}

  \textit{Daily air quality measurements in New York, May to September 1973.\newline
  \\
airquality\newline
A data frame with 154 observations on 6 variables.
\begin{itemize}
\item (,1)  Ozone numeric Ozone (ppb)
\item (,2)  Solar.R numeric Solar R (lang)
\item (,3)  Wind  numeric Wind (mph)
\item (,4)  Temp  numeric Temperature (degrees F)
\item (,5)  Month numeric Month (1--12)
\item (,6) Day numeric Day of month (1--31)
\end{itemize}
}

  \item \textcolor{white}{.}\newline
\begin{lstlisting}[language=html]
> names(airquality)
[1] "Ozone"   "Solar.R" "Wind"    "Temp"    "Month"   "Day" 
\end{lstlisting}


  \item \textcolor{white}{.}\newline
\begin{lstlisting}[language=html]
> dim(airquality)
[1] 153   6
\end{lstlisting}


  \item \textcolor{white}{.}\newline
\begin{lstlisting}[language=html]
> summary(airquality)
     Ozone           Solar.R           Wind             Temp           Month            Day      
 Min.   :  1.00   Min.   :  7.0   Min.   : 1.700   Min.   :56.00   Min.   :5.000   Min.   : 1.0  
 1st Qu.: 18.00   1st Qu.:115.8   1st Qu.: 7.400   1st Qu.:72.00   1st Qu.:6.000   1st Qu.: 8.0  
 Median : 31.50   Median :205.0   Median : 9.700   Median :79.00   Median :7.000   Median :16.0  
 Mean   : 42.13   Mean   :185.9   Mean   : 9.958   Mean   :77.88   Mean   :6.993   Mean   :15.8  
 3rd Qu.: 63.25   3rd Qu.:258.8   3rd Qu.:11.500   3rd Qu.:85.00   3rd Qu.:8.000   3rd Qu.:23.0  
 Max.   :168.00   Max.   :334.0   Max.   :20.700   Max.   :97.00   Max.   :9.000   Max.   :31.0  
 NA's   :37       NA's   :7                                                                      
\end{lstlisting}

  \item \textcolor{white}{.}\newline
\begin{lstlisting}[language=html]
> var(airquality$Temp)
[1] 89.59133
> sqrt(var(airquality$Temp))
[1] 9.46527
\end{lstlisting}
  \item \textcolor{white}{.}\newline
  \begin{enumerate}
  \item \textcolor{white}{.}\newline
\begin{lstlisting}[language=html]
> airquality[2, ]
  Ozone Solar.R Wind Temp Month Day
2    36     118    8   72     5   2
\end{lstlisting}
  \item \textcolor{white}{.}\newline
\begin{lstlisting}[language=html]
> head(airquality[ ,3],15)
 [1]  7.4  8.0 12.6 11.5 14.3 14.9  8.6 13.8 20.1  8.6  6.9  9.7  9.2 10.9 13.2
> length(airquality[,3])
[1] 153
\end{lstlisting}
  \item \textcolor{white}{.}\newline
\begin{lstlisting}[language=html]
> airquality[c(1, 2, 4), ]
  Ozone Solar.R Wind Temp Month Day
1    41     190  7.4   67     5   1
2    36     118  8.0   72     5   2
4    18     313 11.5   62     5   4
\end{lstlisting}
  \item \textcolor{white}{.}\newline
\begin{lstlisting}[language=html]
> airquality[3:6, ]
  Ozone Solar.R Wind Temp Month Day
3    12     149 12.6   74     5   3
4    18     313 11.5   62     5   4
5    NA      NA 14.3   56     5   5
6    28      NA 14.9   66     5   6
\end{lstlisting}
  \item \textcolor{white}{.}\newline
\begin{lstlisting}[language=html]
> head(airquality[ ,-c(1, 2)],15)
   Wind Temp Month Day
1   7.4   67     5   1
2   8.0   72     5   2
3  12.6   74     5   3
4  11.5   62     5   4
5  14.3   56     5   5
6  14.9   66     5   6
7   8.6   65     5   7
8  13.8   59     5   8
9  20.1   61     5   9
10  8.6   69     5  10
11  6.9   74     5  11
12  9.7   69     5  12
13  9.2   66     5  13
14 10.9   68     5  14
15 13.2   58     5  15
> dim(airquality[ ,-c(1, 2)])
[1] 153   4
\end{lstlisting}
  \item \textcolor{white}{.}\newline
\begin{lstlisting}[language=html]
> airquality[airquality$Temp>90, ]
    Ozone Solar.R Wind Temp Month Day
42     NA     259 10.9   93     6  11
43     NA     250  9.2   92     6  12
69     97     267  6.3   92     7   8
70     97     272  5.7   92     7   9
75     NA     291 14.9   91     7  14
102    NA     222  8.6   92     8  10
120    76     203  9.7   97     8  28
121   118     225  2.3   94     8  29
122    84     237  6.3   96     8  30
123    85     188  6.3   94     8  31
124    96     167  6.9   91     9   1
125    78     197  5.1   92     9   2
126    73     183  2.8   93     9   3
127    91     189  4.6   93     9   4
\end{lstlisting}
\end{enumerate}
\item \textcolor{white}{.}\newline
\begin{lstlisting}[language=html]
> airquality$TooWindy = airquality$Wind >= 10
> table(airquality$TooWindy)

FALSE  TRUE 
   81    72 
> airquality$TooWindy = NULL ## Réinitialisation de la variable
> airquality$TooWindy
NULL
\end{lstlisting}
\item \textcolor{white}{.}\newline
\begin{lstlisting}[language=html]
> aq = airquality[ !is.na(airquality$Ozone),]
> dim(aq)
[1] 116   6
> head(aq,15)
   Ozone Solar.R Wind Temp Month Day
1     41     190  7.4   67     5   1
2     36     118  8.0   72     5   2
3     12     149 12.6   74     5   3
4     18     313 11.5   62     5   4
6     28      NA 14.9   66     5   6
7     23     299  8.6   65     5   7
8     19      99 13.8   59     5   8
9      8      19 20.1   61     5   9
11     7      NA  6.9   74     5  11
12    16     256  9.7   69     5  12
13    11     290  9.2   66     5  13
14    14     274 10.9   68     5  14
15    18      65 13.2   58     5  15
16    14     334 11.5   64     5  16
17    34     307 12.0   66     5  17
\end{lstlisting}
\item \textcolor{white}{.}\newline
\begin{lstlisting}[language=html]
library(ggplot2)
qplot(Temp, Ozone, data = airquality, colour = Month)
\end{lstlisting}
\begin{figure}[H]\begin{center}\includegraphics[scale=0.4]{ilu/qplot.png}\end{center}\end{figure}
\end{enumerate}
\subsubsection*{Exercice 4}
\begin{enumerate}
  \item \textcolor{white}{?}\newline
  \begin{lstlisting}[language=html]
  > conso.dat = read.table("http://www.math.unicaen.fr/~chesneau/donneesconsommation.txt", header = T)
> head(conso.dat,5)
  Age Region Revenu Loisirs Pates Cafe Enfants Magnetoscope Lavevaisselle
1 TA1    GR1  17655    2138    61   AC       5            1             1
2 TA1    GR1  26572    2278    42   BC       4            1             1
3 TA1    GR1  33227    3547    32   BC       1            1             0
4 TA1    GR1  77655    5147    23   MC       0            1             1
5 TA1    GR1  24469    2480    27   MC       1            0             0
> str(conso.dat)
'data.frame': 300 obs. of  9 variables:
 $ Age          : Factor w/ 2 levels "TA1","TA2": 1 1 1 1 1 1 1 1 1 1 ...
 $ Region       : Factor w/ 3 levels "GR1","GR2","GR3": 1 1 1 1 1 1 1 1 1 1 ...
 $ Revenu       : int  17655 26572 33227 77655 24469 33421 18604 89000 6092 10794 ...
 $ Loisirs      : int  2138 2278 3547 5147 2480 2978 2356 3752 2060 1933 ...
 $ Pates        : int  61 42 32 23 27 21 32 27 43 27 ...
 $ Cafe         : Factor w/ 3 levels "AC","BC","MC": 1 2 2 3 3 2 3 2 2 1 ...
 $ Enfants      : int  5 4 1 0 1 2 1 0 3 1 ...
 $ Magnetoscope : int  1 1 1 1 0 1 1 1 1 1 ...
 $ Lavevaisselle: int  1 1 0 1 0 1 0 1 0 1 ...
  \end{lstlisting}

\item \textcolor{white}{?}\newline
  \begin{lstlisting}[language=html]
> attach(conso.dat)
The following object is masked _by_ .GlobalEnv:

    Age

> str(conso.dat)
'data.frame': 300 obs. of  9 variables:
 $ Age          : Factor w/ 2 levels "TA1","TA2": 1 1 1 1 1 1 1 1 1 1 ...
 $ Region       : Factor w/ 3 levels "GR1","GR2","GR3": 1 1 1 1 1 1 1 1 1 1 ...
 $ Revenu       : int  17655 26572 33227 77655 24469 33421 18604 89000 6092 10794 ...
 $ Loisirs      : int  2138 2278 3547 5147 2480 2978 2356 3752 2060 1933 ...
 $ Pates        : int  61 42 32 23 27 21 32 27 43 27 ...
 $ Cafe         : Factor w/ 3 levels "AC","BC","MC": 1 2 2 3 3 2 3 2 2 1 ...
 $ Enfants      : int  5 4 1 0 1 2 1 0 3 1 ...
 $ Magnetoscope : int  1 1 1 1 0 1 1 1 1 1 ...
 $ Lavevaisselle: int  1 1 0 1 0 1 0 1 0 1 ...
> summary(conso.dat)
  Age      Region        Revenu          		Loisirs         	Pates       		Cafe        Enfants      	Magnetoscope    	Lavevaisselle   
 TA1:150  GR1:100  Min.   :  5633   		Min.   : 445   	Min.   :11.00   	AC: 94   	Min.   :0.000   	Min.   :0.0000   		Min.   :0.0000  
 TA2:150  GR2:100  1st Qu.: 14520   	1st Qu.:1197   	1st Qu.:21.00   BC:101   	1st Qu.:1.000   1st Qu.:0.0000   	1st Qu.:0.0000  
           	GR3:100   Median : 20989   	Median :1918   	Median :26.00  MC:105   	Median :1.000   Median :1.0000   	Median :0.0000  
                     		Mean   : 24707   	Mean   :1946   	Mean   :26.42            	Mean   :1.667   Mean   :0.5133  	Mean   :0.4333  
                     		3rd Qu.: 30654   	3rd Qu.:2360   	3rd Qu.:30.00            	3rd Qu.:2.000   3rd Qu.:1.0000   	3rd Qu.:1.0000  
                     		Max.   :113879   	Max.   :6395   	Max.   :61.00            		Max.   :9.000   	Max.   :1.0000   	Max.   :1.0000  
  \end{lstlisting}
On obtient une brève description des variables ainsi que des éléments statistiques pour les variables considérées.

\item \textcolor{white}{?}\newline
  \begin{lstlisting}[language=html]
> conso.dat[Cafe=="AC" & Revenu <15000, ]
    Age Region Revenu Loisirs Pates Cafe Enfants Magnetoscope Lavevaisselle
10  TA1    GR1  10794    1933    27   AC       1            1             1
17  TA1    GR1  12185    2288    26   AC       0            0             0
27  TA1    GR1  14222    2185    37   AC       9            1             1
32  TA1    GR1   6445    1823    21   AC       3            1             1
53  TA1    GR2   7809    1773    22   AC       0            0             1
73  TA1    GR2  13830    1822    34   AC       5            1             1
74  TA1    GR2   7603    1585    26   AC       1            0             0
106 TA1    GR3  14160    2093    29   AC       1            1             0
142 TA1    GR3  13154    2061    28   AC       1            0             0
180 TA2    GR1   5903     674    27   AC       2            0             0
194 TA2    GR1   9920     844    21   AC       2            0             0
201 TA2    GR2  13788     823    26   AC       2            0             0
202 TA2    GR2   6790     445    29   AC       2            0             0
206 TA2    GR2   6625     453    28   AC       2            0             0
211 TA2    GR2  12880     768    24   AC       1            0             0
215 TA2    GR2   8103     510    18   AC       0            0             0
234 TA2    GR2   5802     512    18   AC       0            0             0
242 TA2    GR2  10164     503    25   AC       5            0             1
248 TA2    GR2  14133     979    29   AC       2            0             1
250 TA2    GR2  14045     786    27   AC       2            0             0
252 TA2    GR3   9922     686    20   AC       1            0             1
254 TA2    GR3  11780    1029    18   AC       3            0             1
273 TA2    GR3  14886    1216    20   AC       1            0             1
  \end{lstlisting}


\item \textcolor{white}{?}\newline
  \begin{lstlisting}[language=html]
> conso.dat[Enfants >3 & Pates >60 & Revenu <20000, ]
  Age Region Revenu Loisirs Pates Cafe Enfants Magnetoscope Lavevaisselle
1 TA1    GR1  17655    2138    61   AC       5            1             1
  \end{lstlisting}
\end{enumerate}

\subsubsection*{Exercice 5}
\begin{lstlisting}[language=html]
> fonc1 = function(m, n){
+   x = 1:n
+   y = x^m
+   sum(y)
+ }
> fonc1(10,2)
[1] 1025
\end{lstlisting}
\subsubsection*{Exercice 6}
  \begin{lstlisting}[language=html]
> fonc2 = function(x){
+   n = length(x)
+   x^(1:n) / (1:n)
+ }
> c <- seq(1,10,1);c
 [1]  1  2  3  4  5  6  7  8  9 10
> fonc2(c)
 [1]          1          2          9         64        625       7776     117649    2097152   43046721 1000000000
 \end{lstlisting}
\subsubsection*{Exercice 7}
  \begin{lstlisting}[language=html]
> fonc3 = function(x){
+   n = length(x)
+   ( x[1:(n - 2)] + x[2:(n - 1)] + x[3:n] ) / 3
+ }
> c <- seq(1,10,0.5);c
 [1]  1.0  1.5  2.0  2.5  3.0  3.5  4.0  4.5  5.0  5.5  6.0  6.5  7.0  7.5  8.0  8.5  9.0  9.5 10.0
> fonc3(c)
 [1] 1.5 2.0 2.5 3.0 3.5 4.0 4.5 5.0 5.5 6.0 6.5 7.0 7.5 8.0 8.5 9.0 9.5
\end{lstlisting}
\subsubsection*{Exercice 8}
  \begin{lstlisting}[language=html]
> fonc4 = function(x) {
+   if (x < 0)
+     0
+   else
+     (1 / 10) * exp(-x / 10)
+ }
> fonc4(-2)
[1] 0
> fonc4(2)
[1] 0.08187308
\end{lstlisting}
Ou plus simplement : 
  \begin{lstlisting}[language=html]
fonc4 = function(x) {
	ifelse(x >= 0, (1 / 10) * exp(-x / 10), 0)
}
\end{lstlisting}
\subsubsection*{Exercice 9}
  \begin{lstlisting}[language=html]
> fonc5 = function(k, n, p) {
+   choose(n, k) * p^k * (1 - p)^(n - k)
+ }
> fonc5(1,5,3)
[1] 240
> fonc5(3,3,1)
[1] 1
\end{lstlisting}
\subsubsection*{Exercice 10}
  \begin{lstlisting}[language=html]
> fonc6 = function(k, lambda) {
+   exp(-lambda) * (lambda^k / factorial(k))
+ }
> fonc6(5,9)
[1] 0.06072688
\end{lstlisting}


\subsubsection*{Exercice 11}
  \begin{lstlisting}[language=html]
Loop = function(n) {
  x = numeric()
  x[1] = 0.5
  for(j in 2:n)
    x[j] = 1 + 0.25 * x[j-1]^2
  x
}

plot(Loop(500))
\end{lstlisting}

\begin{figure}[H]\begin{center}\includegraphics[scale=0.4 ]{ilu/plit.png}\end{center}\end{figure}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\chapter{Introduction à Rcommander}
\textcolor{white}{.}\newline
\textbf{Auteur : } Pauline Scherdel\newline
Ingénieure de recherche - Inserm Université Paris Sud (Paris XI).\newline
Nantes, Pays de la Loire, France.\newline
\\
\textbf{Contact : } Pauline.Scherdel@univ-nantes.fr
\section{Introduction à Rcmdr sous R}
Ce document constitue une présentation succincte du package Rcommander (\textbf{Rcmdr}), une sur-couche du logiciel \textbf{R}. Il s'agit d'une interface graphique qui facilite l'interactivité avec le logiciel R. En particulier, on s'intéressera à l'importation et la manipulation des données quantitatives et qualitatives, à la description d'un jeu de données et à l'analyse statistique.\newline
L'interface du package \textbf{Rcmdr} est assez rudimentaire. Elle est composée d'un menu avec des listes déroulantes afin de remplacer les fonctions R à taper dans un script, d'une fenêtre \textit{script R} avec les commandes R, d'une fenêtre \textit{Sortie} relative aux résultats et d'une fenêtre \textit{Message} relative aux messages d'erreur. Les commandes exécutées par le menu sont traduites en script R dans la fenêtre script. Il est possible de taper des commandes R directement dans cette fenêtre.
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/a.png}\caption{Aperçu de l'interface de Rcmdr}\end{center}\end{figure}
\section{Interagir avec R}
Démarrer avec \textbf{R}. Quelque soit le système d'exploitation utilisé (Windows, Mac, Linux), \textbf{R} fonctionne comme tout autre logiciel : il suffit généralement de double-cliquer sur l'icône de l'application pour démarrer \textbf{R}. On dispose ensuite d'une console interactive dans laquelle on peut commencer à saisir des commandes après l'invite R \textbf{>}. Les résultats seront affichés aussitôt dans la console.
\section{Installer et charger le package Rcmdr sous R}
Il faut installer le package Rcmdr grâce à la commande \textit{install.packages()} :
\begin{lstlisting}[language=html]
install.packages("Rcmdr")
\end{lstlisting}
On obtient la fenêtre suivante :
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/b.png}\caption{Message lors de l'installation du package Rcmdr}\end{center}\end{figure}
Cliquer sur Oui pour installer les dépendances.\newline
On installera aussi les packages \textit{epicalc, epitools et prettyR} :
\begin{lstlisting}[language=html]
install.packages("epicalc")
install.packages("epitools")
install.packages("prettyR")
\end{lstlisting}
Les packages sont installés définitivement (tant qu'on ne les désinstalle pas).\newline
Ensuite, il faut \textit{charger les packages} à chaque session de \textbf{R} pour avoir accès aux fonctions qui les composent. On utilise pour cela la commande \textbf{library()} :
\begin{lstlisting}[language=html]
library(Rcmdr)
library(epicalc)
library(epitools)
library(prettyR)
\end{lstlisting}
\section{Importation des données}
Il est possible d'importer un jeu de données à partir d'un fichier \textit{Excel, Access, dBase} ou \textit{texte} mais également à partir d'autres formats comme \textit{SAS, SPSS ou STATA}.\newline
\textcolor{red}{Sous MAC, il est impossible d'importer un jeu de données à partir d'un fichier Excel, Access ou dBase}.
\subsection{Importation à partir d'un fichier Excel}
Pour importer un jeu de données à partir d'un fichier Excel, Access ou dBase : \textbf{Données > Importer des données > Depuis un fichier Excel, Access ou dBase} 
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/c.png}\caption{Importation d'un fichier Excel - Etape 1}\end{center}\end{figure}
Il faut nommer le fichier qui vient d'être importé, par exemple en \textbf{smp2}, et parcourir vos documents pour chercher le jeu de données \textbf{smp2}.
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/d.png}\caption{Importation d'un fichier Excel - Etape 2}\end{center}\end{figure}
\subsection{Importation à partir d'un fichier CSV}
Pour importer un jeu de données à partir d'un fichier csv : \textbf{Données > Importer des données > Depuis un fichier texte, le presse-papiers ou URL }\newline
Il faut nommer le fichier qui vient d'être importé, par exemple en \textbf{smp2}, et parcourir vos documents pour chercher le jeu de données \textbf{smp2}.
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/e.png}\caption{Importation d'un fichier CSV - Etape 1}\end{center}\end{figure}
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/f.png}\caption{Importation d'un fichier CSV - Etape 2}\end{center}\end{figure}
Après l'importation du jeu de données dans Rcmdr, il est important de vérifier le nombre d'observations et de variables, afin de savoir s'il est bien adéquat avec le fichier initial.
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/g.png}\caption{Vérification du nombre d'observations et de variables}\end{center}\end{figure}
En cliquant sur \textbf{Visualiser}, il est possible d'apercevoir le jeu de données \textbf{smp2} :
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/h.png}\caption{Visualisation des variables et observations de la table smp2}\end{center}\end{figure}
\section{Manipulation des données}
\subsection{Visualisation brève au jeu de données}
Une description brève du jeu de données importé peut être obtenue.\newline
\\
\textbf{Statistiques > Résumés > Jeu de données actif}
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/i.png}\caption{Description de l'ensemble des variables du jeu de données smp2}\end{center}\end{figure}
Pour chacune des variables du jeu de données, nous disposons d'indicateurs de positions (moyenne, médiane, quartiles). Attention, toutes les variables du jeu de données sont par défaut de type quantitatif. Nous verrons donc dans la partie suivante comment convertir ces variables en variables qualitatives.
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/j.png}\caption{Résultats : description du jeu de données smp2}\end{center}\end{figure}
\subsection{Conversion des données quantitatives en qualitatives}
L'ensemble des variables issues du jeu de données importé sont de type quantitatif par défaut. Avant d'analyser le jeu de données, il faut donc convertir les variables quantitatives, qui sont supposées être qualitatives, en variables qualitatives.\newline
\textbf{Données > Gérer les variables du jeu de données actifs > Convertir des variables numériques en facteurs}
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/k.png}\caption{Conversion de variables quantitatives en facteurs}\end{center}\end{figure}
Par exemple, la variable \textit{ecole} (niveau de formation actuel) est quantitative par défaut. Nous allons donc la convertir en variable qualitative en $5$ classes.\newline
La première possibilité est de transformer cette variable avec des modalités en chiffre \textit{1, 2, 3, 4, 5}.
La seconde possibilité est de transformer cette variable avec des modalités en texte : \textit{sans diplôme, collège, CAP, BEP, Lycée, université}.
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/l.png}\caption{Conversion de la variable ecole en facteurs - Etape 1}\end{center}\end{figure}
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/m.png}\caption{Conversion de la variable ecole en facteurs - Etape 2}\end{center}\end{figure}
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/n.png}\caption{Conversion de la variable ecole en facteurs - Etape 3}\end{center}\end{figure}
\subsection{Recodage des données quantitatives en qualitatives}
Certaines analyses demandent de recoder des variables quantitatives en variables qualitatives, à 2 ou plusieurs catégories. Lors du recodage, il faut faire attention aux données manquantes.\newline
\textbf{Données > Gérer les variables du jeu de données actifs > Recoder des variables}
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/o.png}\caption{Recodage des variables}\end{center}\end{figure}
Dans cet exemple, nous allons recoder la variable quantitative durée d'interview (\textit{dur.interv}) en variable qualitative à $3$ classes (\textit{dur.interv\_c2}). Si dur.interv est compris entre $0$ et $60$ minutes alors dur.\textit{interv\_c2='Duree 60-'}, si \textit{dur.interv} est vide alors \textit{dur.interv\_c2=NA}, sinon \textit{dur.interv\_c2 = 'Duree 60+'}.
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/p.png}\caption{Résultats : recodage de la variable dur.interv}\end{center}\end{figure}
\subsection{Création de nouvelles variables}
De nouvelles variables peuvent être créées à partir d'autres variables à l'aide de fonctions mathématiques des opérateurs ($+,-,*,/$) ou des fonctions ($\log,\exp,\sin,\cos\tan,\dots$).\newline
\textbf{Données > Gérer les variables du jeu de données actifs > Calculer une nouvelle variable}
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/q.png}\caption{Création de variables}\end{center}\end{figure}
Pour exemple, nous allons créer la variable \textbf{$\log$(duree)}, qui représente le logarithme de la durée d'interview :
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/r.png}\caption{Résultats : création de la variable $\log$(duree)}\end{center}\end{figure}
\section{Description des données}
\subsection{Distribution des variables quantitatives et qualitatives}
Dans une étude, il est important de décrire les variables de son jeu de données.\newline
Pour les variables quantitatives, il est intéressant d'obtenir des \textbf{moyennes, écart-types, médiane, \dots}\newline
\textbf{Statistiques > Résumés > Statistiques descriptives}
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/s.png}\caption{Description des variables quantitatives du jeu de données smp2 - Etape 1}\end{center}\end{figure}
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/t.png}\caption{Description des variables quantitatives du jeu de données smp2 - Etape 2}\end{center}\end{figure}
En moyenne, la durée d'interview est de 23.99 minutes ($\pm$ 10 écart-types). La médiane de la durée d'interview est de 25 minutes, c'est à dire que la moitié de la population a une durée d'interview de 25 minutes.
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/u.png}\caption{Résultats : description de la variable dur.interv issue du jeu de données smp2}\end{center}\end{figure}
Pour les variables qualitatives, il est intéressant d'obtenir des proportions et des intervalles de confiance.\newline
\textbf{Statistiques > Résumés > Distribution de fréquence}
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/v.png}\caption{Description des variables qualitatives du jeu de données smp2 - Etape 1}\end{center}\end{figure}
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/w.png}\caption{Description des variables qualitatives du jeu de données smp2 - Etape 2}\end{center}\end{figure}
La proportion de détenus ayant subi des maltraitances pendant l'enfance est de 27,78\% (220).
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/x.png}\caption{Résultats : description de la variables abus issue du jeu de données smp2 (proportion)}\end{center}\end{figure}
Pour obtenir l'intervalle de confiance d'une proportion, il n'existe pas de commande sous Rcmdr. Il faut taper et soumettre la procédure suivante dans le script: \textbf{prop.test(n,t)} où n est le nombre de cas et t est le nombre total d'individus concernés par la variable testée.\newline
\dots avec un IC95\% $[24,71\% - 31.06\%]$.
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/y.png}\caption{Résultats : description de la variable abus issue du jeu de données smp2 (IC)}\end{center}\end{figure}
\subsection{Représentation des variables quantitatives et qualitatives}
La distribution des variables quantitatives va être illustrée par des histogrammes ou des boxplots et celle des variables qualitatives par des diagrammes.\newline
\textbf{Graphes > Histogramme} \newline
Par exemple, la distribution de la durée d'interview (\textbf{dur.interv}) est représentée par un histogramme. Dans les options, il est possible de choisir quel type de données nous intéresse (effectifs, pourcentages, densités), de renommer les libellés des axes et de donner un titre au graphique.
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/z.png}\caption{Réalisation de graphiques de différents types de variables}\end{center}\end{figure}
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/aa.png}\caption{Réalisation d'un histogramme d'une variable quantitative
}\end{center}\end{figure}
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/ab.png}\caption{Résultats : histogramme de la variable dur.interv}\end{center}\end{figure}
\textbf{Graphes > Boite de dispersion}\newline
La distribution de la durée d'interview peut être représentée également par un \textbf{boxplot}.
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/ac.png}\caption{Réalisation d'un boxplot d'une variable quantitative}\end{center}\end{figure}
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/ad.png}\caption{Résultats : boxplot de la variable dur.interv}\end{center}\end{figure}
\textbf{Graphes > Graphes en barres}\newline
Nous allons représenter la variable abus (abus) par un diagramme en barres. Il est possible de renommer les libellés des axes et de donner un titre au graphique.
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/ae.png}\caption{Réalisation d'un diagramme d'une variable qualitative}\end{center}\end{figure}
Sur cet exemple, nous constatons que les détenus ayant subi des maltraitances pendant l'enfance sont moins nombreux.
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/af.png}\caption{Résultats : diagramme de la variable abus}\end{center}\end{figure}
Pour représenter le diagramme en barre en pourcentage, il faut préalablement créer une variable abus en pourcentage.
\subsection{Représentation des variables quantitatives et qualitatives}
La distribution des variables quantitatives va être illustrée par des histogrammes ou des boxplots et celle des variables qualitatives par des diagrammes.
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/ag.png}\caption{Réalisation de graphiques de différents types de variables}\end{center}\end{figure}
\textbf{Graphes > Histogramme}\newline
Par exemple, la distribution de la durée d'interview (dur.interv) est représentée par un histogramme. Dans les options, il est possible de choisir quel type de données nous intéresse (effectifs, pourcentages, densités), de renommer les libellés des axes et de donner un titre au graphique.
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/ah.png}\caption{Réalisation d'un histogramme d'une variable quantitative}\end{center}\end{figure}
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/ai.png}\caption{Résultats : histogramme de la variable dur.interv}\end{center}\end{figure}
\textbf{Graphes > Boite de dispersion}\newline
La distribution de la durée d'interview peut être représentée également par un boxplot.
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/aj.png}\caption{Réalisation d'un boxplot d'une variable quantitative}\end{center}\end{figure}
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/ak.png}\caption{Résultats : boxplot de la variable dur.interv}\end{center}\end{figure}
\textbf{Graphes > Graphes en barres}\newline
Nous allons représenter la variable abus (abus) par un diagramme en barres. Il est possible de renommer les libellés des axes et de donner un titre au graphique.
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/al.png}\caption{Réalisation d'un diagramme d'une variable qualitative}\end{center}\end{figure}
Sur cet exemple, nous constatons que les détenus ayant subi des maltraitances pendant l'enfance sont moins nombreux.
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/am.png}\caption{Résultats : diagramme de la variable abus}\end{center}\end{figure}
Pour représenter le diagramme en barre en pourcentage, il faut préalablement créer une variable abus en pourcentage.
\subsection{Représentation de variables quantitatives en fonction d'une variable qualitative}
Nous pouvons illustrer par un boxplot si le fait d'avoir subi des maltraitances pendant l'enfance pouvait entraîner des écarts dans la durée de l'interview.\newline
\textbf{Graphes > Boite de dispersion}
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/an.png}\caption{Réalisation d'un diagramme d'une variable quantitative en fonction d'une variable qualitative}\end{center}\end{figure}
La médiane entre les deux groupes semble identique.
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/ao.png}\caption{Résultats - diagramme de la variable dur.interv en fonction de la variable abus}\end{center}\end{figure}
\section{Tests statistiques}
\subsection{Comparaison de moyennes d'une variable quantitative entre deux groupes}
Nous allons comparer statistiquement la différence de durée d'interview entre les détenus ayant subi des maltraitances pendant l'enfance et ceux n'ayant jamais subi de maltraitance pendant l'enfance.
\subsubsection{Effectifs par groupe ($n1$ et $n2$)}
Nous allons regarder la moyenne de durée d'interview entre les deux groupes ainsi que les effectifs par groupe\newline
\textbf{Statistiques > Résumés > Statistiques descriptives}
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/ap.png}\caption{Calcul des moyennes par groupe}\end{center}\end{figure}
Les effectifs des deux groupes sont supérieurs à 30. Nous montrons que la médiane dans les deux groupes est de 25 minutes, et avec une moyenne de 23.34 minutes ($\pm$ 10.7) dans le groupe \textit{non abus} et de 25.75 minutes ($\pm$ 10.2) dans le groupe \textit{abus}.
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/aq.png}\caption{Résultats : moyenne de la variable dur.interv chez les détenus ayant subi des maltraitances et
ceux qui n'en ont pas subi}\end{center}\end{figure}
\subsubsection{Tester la normalité de la distribution de la variable quantitative (si $n1$ et $n2$ $\leq$ 30) - Test de Shapiro-Wilk}
Nous allons tester la normalité de la distribution de la durée d'interview.\newline
\textbf{Statistiques > Résumés > Tests de normalité de Shapiro-Wilk}
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/ar.png}\caption{Réalisation d'un test de normalité d'une variable quantitative - Etape 1}\end{center}\end{figure}
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/as.png}\caption{Réalisation d'un test de normalité d'une variable quantitative - Etape 2}\end{center}\end{figure}
Le test de Shapiro est significatif $(p<0.05)$. Cela signifie que la variable ne suit pas une loi normale.
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/at.png}\caption{Résultats : test de normalité de la variable dur.interv}\end{center}\end{figure}
\subsubsection{Comparaison de moyennes d'une variable quantitative entre deux groupes - Test de Student et de Wilcoxon}
Dans notre exemple, les effectifs dans chaque groupe sont supérieurs à 30, donc nous pouvons réaliser un test de Student.\newline
Si les effectifs étaient inférieurs à 30 et que la durée d'interview suivait une loi normale, alors le test de Student serait toujours valable (seuls les degrés de liberté et la loi seraient modifiés). Si les effectifs étaient inférieurs à 30 et que la durée d'interview ne suivait pas suivi une loi normale, alors le test non paramétrique de Mann-Whitney serait recommandé.
\paragraph{Test de Student}\textcolor{white}{o}\newline
\textbf{Statistiques > Moyennes > t-test indépendant}
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/au.png}\caption{Réalisation du test de Student pour comparer les moyennes entre deux groupes - Etape 1}\end{center}\end{figure}
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/av.png}\caption{Réalisation du test de Student pour comparer les moyennes entre deux groupes - Etape 2}\end{center}\end{figure}
Le test indique qu'il y a une différence significative $(p<0.05)$ de la durée d'interview entre les deux groupes. (Test de Student pour comparer les moyennes de la variable dur.interv entre les détenus ayant subi des maltraitances et ceux qui n'en ont pas subi)
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/aw.png}\caption{Résultats : test de Student pour comparer les moyennes de la variable dur.interv entre les détenus ayant subi des maltraitances et ceux qui n'en ont pas subi}\end{center}\end{figure}
\paragraph{Test non paramétrique de Wilcoxon}\textcolor{white}{o}\newline
Réalisation du test de Wilcoxon pour comparer les moyennes entre deux groupes.\newline
\textbf{Statistiques > Tests non paramétriques > Test de Wilcoxon bivarié}
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/ax.png}\caption{Réalisation du test de Wilcoxon pour comparer les moyennes entre deux groupes - Etape 1}\end{center}\end{figure}
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/ay.png}\caption{Réalisation du test de Wilcoxon pour comparer les moyennes entre deux groupes - Etape 2}\end{center}\end{figure}
Le test indique qu'il y a une différence significative $(p<0.05)$ de la durée d'interview entre les deux groupes.
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/az.png}\caption{Réalisation du test de Fisher pour comparer les proportions entre deux variables quantitatives -
Etape 1}\end{center}\end{figure}
\textbf{Note : }Ce test est réalisé juste pour l'exemple et n'est pas recevable
\subsubsection{Comparaison de proportions d'une variable qualitative entre deux groupes}
Nous allons comparer statistiquement l'association entre le fait de subir des maltraitances pendant l'enfance et l'existence d'un trouble dépressif.
\paragraph{Comparaison de proportions d'une variable qualitative entre deux groupes}\textcolor{white}{b}\newline
Dans notre exemple, le test du \textbf{khi$^{2}$} est faisable si et seulement si les effectifs espérés sont supérieurs à 5, sinon le test de Fisher est recommandé.
\subparagraph{Test du \textbf{khi$^{2}$}}\textcolor{white}{b}\newline
\textbf{Statistiques > Tables de contingences > Tri croisé}
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/ba.png}\caption{Réalisation du test du khi$^{2}$ pour comparer les proportions entre deux variables quantitatives -
Etape 1}\end{center}\end{figure}
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/bb.png}\caption{Réalisation du test du khi$^{2}$ pour comparer les proportions entre deux variables quantitatives -
Etape 2}\end{center}\end{figure}
Les effectifs théoriques sont bien supérieurs à 5, le test du khi$^{2}$ est donc recevable.\newline
Ce test indique qu'il n'y a pas d'association entre le fait de subir des maltraitances pendant l'enfance et l'existence d'un trouble dépressif $(p>0.05)$.
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/bc.png}\caption{Résultats : test du khi$^{2}$ pour comparer les proportions entre la variable abus et dep.cons}\end{center}\end{figure}
\subparagraph{Test non paramétrique de Fisher}\textcolor{white}{b}\newline
\textbf{Statistiques > Tables de contingences > Tri croisé}
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/bd.png}\caption{Réalisation du test de Fisher pour comparer les proportions entre deux variables quantitatives - Etape 1}\end{center}\end{figure}
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/be.png}\caption{Réalisation du test de Fisher pour comparer les proportions entre deux variables quantitatives - Etape 1 - Etape 2}\end{center}\end{figure}
Ce test indique qu'il n'y a pas d'association entre le fait de subir des maltraitances pendant l'enfance et l'existence d'un trouble dépressif $(p>0.05)$.
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/bf.png}\caption{}\end{center}\end{figure}
\textbf{Note : }Ce test est réalisé juste pour l'exemple et n'est pas recevable
\section{Modèles statistiques}
\textbf{Statistiques > Ajustement de modèles}
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/bg.png}\caption{Modèles linéaires et logistiques}\end{center}\end{figure}
\subsection{Modèles linéaires}
Nous allons étudier l'association entre la durée de l'interview et l'abus, ajusté sur l'âge du détenu\newline
\textbf{Statistiques > Ajustement de modèles > Modèle linéaire}\newline
\\
Il faut double-cliquer sur les variables afin qu'elles s'affichent dans la formule du modèle.
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/bh.png}\caption{Réalisation d'un modèle linéaire entre une variable quantitative et une variable qualitative}\end{center}\end{figure}
Le p-value global du modèle est de $0,0005366$. Cela signifie qu'une des variables (abus ou âge) est significative.\newline
Il y a une association significative entre la durée d'interview et abus $(p=0,003)$, après ajustement sur l'âge du détenu.
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/bi.png}\caption{Résultats : modèle linéaire entre la variable dur.interv et abus}\end{center}\end{figure}
\subsection{Modèles logistiques}
Nous allons étudier entre le fait de subir des maltraitances pendant l'enfance et l'existence d'un trouble dépressif, ajusté sur l'âge du détenu\newline
\textbf{Statistiques > Ajustement de modèles > Modèle linéaire généralisé}\newline
\\
Il faut double-cliquer sur les variables afin qu'elles s'affichent dans la formule du modèle. Pour indiquer qu'il s'agit d'un modèle logistique, il faut indiquer que la famille est binomiale et la fonction de lien logit.
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/bj.png}\caption{Réalisation d'un modèle linéaire entre deux variables qualitatives}\end{center}\end{figure}
Il n'y a pas association significative entre le fait de subir des maltraitances pendant l'enfance et l'existence d'un trouble dépressif, après ajustement sur l'âge du détenu.
\begin{figure}[H]\begin{center}\includegraphics[scale=0.45]{ilu/bk.png}\caption{Résultats: modèle logistique entre la variable abus et dep.cons}\end{center}\end{figure}



